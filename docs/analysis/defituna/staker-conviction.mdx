---
title: Staker Conviction
---

import BrowserOnly from '@docusaurus/BrowserOnly';
import LoadingSpinner from '@site/src/components/common/LoadingSpinner';

# Staker Conviction

Understanding protocol loyalty through reward behavior analysis.

Stakers can choose to **compound** their rewards (reinvesting back into TUNA) or **claim** them (withdrawing rewards). This analysis examines stakers who actively managed their rewards (claimed or compounded) during the analysis period.

{/* Note: Statistics below are populated dynamically from the data pipeline */}

<BrowserOnly fallback={<LoadingSpinner />}>
  {() => {
    const { useStakerLoyalty } = require('@site/src/hooks/useStakerLoyalty');
    const { useStakingMetrics } = require('@site/src/hooks/useStakingMetrics');
    const {
      LoyaltyStats,
      BehaviorPieChart,
      InverseWhaleChart,
      DailyTrendsChart,
    } = require('@site/src/components/Loyalty');

    function StakerConvictionPage() {
      const { data, loading, error } = useStakerLoyalty();
      const { data: stakingData, loading: stakingLoading, error: stakingError } = useStakingMetrics();

      if (loading || stakingLoading) {
        return <LoadingSpinner />;
      }

      if (error || !data) {
        return (
          <div className="alert alert--danger" role="alert">
            <strong>Could not load staker loyalty data.</strong> {error || 'Unknown error'}
          </div>
        );
      }

      if (stakingError || !stakingData) {
        return (
          <div className="alert alert--danger" role="alert">
            <strong>Could not load staking data.</strong> {stakingError || 'Unknown error'}
          </div>
        );
      }

      const { summary, user_segments, daily_trends, date_range } = data;

      // Get current active stakers from the latest daily count
      const activeStakersCounts = stakingData.active_stakers?.daily_counts || [];
      const currentActiveStakers = activeStakersCounts.length > 0
        ? activeStakersCounts[activeStakersCounts.length - 1].count
        : undefined;

      return (
        <>
          <div className="alert alert--info" role="alert" style={{ marginBottom: '24px' }}>
            <h4 style={{ marginTop: 0 }}>Data Scope</h4>
            <p style={{ marginBottom: 0 }}>
              This analysis examines <strong>{summary.total_users.toLocaleString()} stakers who actively managed their rewards</strong> (claimed or compounded) between{' '}
              <strong>{date_range.start}</strong> and <strong>{date_range.end}</strong>.
              {currentActiveStakers && (
                <>
                  {' '}Out of <strong>{currentActiveStakers.toLocaleString()} wallets currently holding active stakes</strong>,{' '}
                  this represents <strong>{((summary.total_users / currentActiveStakers) * 100).toFixed(1)}%</strong> who actively manage their rewards.
                </>
              )}
            </p>
          </div>

          <LoyaltyStats summary={summary} />

          <BehaviorPieChart
            userSegments={user_segments}
            totalUsers={summary.total_users}
            currentActiveStakers={currentActiveStakers}
          />

          <InverseWhaleChart userSegments={user_segments} />

          {daily_trends && <DailyTrendsChart dailyTrends={daily_trends} />}

          <details>
            <summary>
              <strong>Methodology</strong>
            </summary>
            <div style={{ padding: '16px 0' }}>
              <h4>How Metrics Are Calculated</h4>

              <p>
                <strong>Loyalty Score</strong>: Percentage of users who have only compounded rewards
                (never claimed).
              </p>

              <p>
                <strong>Reinvestment Rate</strong>: Percentage of total rewards that were compounded
                rather than claimed, calculated as:
              </p>
              <pre style={{ background: 'var(--ifm-color-emphasis-100)', padding: '12px', borderRadius: '4px' }}>
                Reinvestment Rate = (Total Compounded SOL / Total Rewards SOL) Ã— 100
              </pre>

              <p>
                <strong>User Behavior Segments</strong>:
              </p>
              <ul>
                <li>
                  <strong>Compound-only</strong>: Users who have never executed a ClaimReward transaction
                </li>
                <li>
                  <strong>Claim-only</strong>: Users who have never executed a CompoundReward transaction
                </li>
                <li>
                  <strong>Mixed</strong>: Users who have executed both ClaimReward and CompoundReward
                  transactions
                </li>
              </ul>

              <p>
                <strong>Stake Size Tiers</strong>: Users are segmented based on their staked TUNA
                holdings to analyze compound behavior patterns.
              </p>

              <h4>Data Source</h4>

              <p>
                Analysis is based on on-chain transaction data from the DefiTuna staking program,
                covering the period from <strong>{date_range.start}</strong> to{' '}
                <strong>{date_range.end}</strong>.
              </p>

              <p>
                Reward amounts are extracted from transaction logs (ClaimReward and CompoundReward
                instructions) and tracked per unique wallet address (fee payer). The data is updated as
                part of the daily analytics pipeline.
              </p>

              <h4>Staker Population Context</h4>

              <p>
                <strong>Current Active Stakers</strong>:{' '}
                {currentActiveStakers ? (
                  <>
                    {currentActiveStakers.toLocaleString()} wallets currently hold non-zero staking balances
                    {activeStakersCounts.length > 0 && ` (as of ${activeStakersCounts[activeStakersCounts.length - 1].date})`}.
                  </>
                ) : (
                  'N/A'
                )}
              </p>

              <p>
                <strong>Reward Active Stakers</strong>: {summary.total_users.toLocaleString()} wallets
                {currentActiveStakers && (
                  <>
                    {' '}({((summary.total_users / currentActiveStakers) * 100).toFixed(1)}% of current active stakers)
                  </>
                )}
                {' '}have claimed or compounded rewards during the analysis period.
              </p>
            </div>
          </details>
        </>
      );
    }

    return <StakerConvictionPage />;
  }}
</BrowserOnly>
