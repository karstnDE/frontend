---
title: TUNA Staking APR
---

import BrowserOnly from '@docusaurus/BrowserOnly';
import LoadingSpinner from '@site/src/components/common/LoadingSpinner';
import ChartPageSEO from '@site/src/components/SEO/ChartPageSEO';

<ChartPageSEO
  title="TUNA Staking APR"
  description="Interactive chart showing the historical development of TUNA staking APR based on DefiTuna protocol treasury revenue. Track current, average, and maximum APR with personalized calculations."
  chartType="line"
  keywords={['TUNA', 'staking', 'APR', 'DefiTuna', 'yield', 'treasury revenue']}
/>

# TUNA Staking APR

This dashboard shows the historical development of the Annual Percentage Rate (APR) for staking TUNA tokens, calculated based on the DefiTuna protocol's treasury revenue.

## Current Statistics

<BrowserOnly fallback={<LoadingSpinner />}>
  {() => {
    const { useEffect, useState } = require('react');

    function ApySummaryStats() {
      const [data, setData] = useState(null);
      const [loading, setLoading] = useState(true);
      const [userEntryPrice, setUserEntryPrice] = useState(null);

      useEffect(() => {
        // Load APR data
        fetch('/data/apr_data.json')
          .then(response => response.json())
          .then(jsonData => {
            setData(jsonData);
            setLoading(false);
          })
          .catch(err => {
            console.error('Error loading APR summary:', err);
            setLoading(false);
          });

        // Load user entry price from localStorage, default to 0.05 (public pre-sale price)
        const saved = localStorage.getItem('tunaEntryPrice');
        if (saved && !isNaN(parseFloat(saved))) {
          setUserEntryPrice(parseFloat(saved));
        } else {
          setUserEntryPrice(0.05);
        }

        // Listen for storage changes to sync across components
        const handleStorageChange = () => {
          const newSaved = localStorage.getItem('tunaEntryPrice');
          if (newSaved && !isNaN(parseFloat(newSaved))) {
            setUserEntryPrice(parseFloat(newSaved));
          } else {
            setUserEntryPrice(null);
          }
        };

        window.addEventListener('storage', handleStorageChange);
        // Also listen for custom event for same-page updates
        window.addEventListener('tunaEntryPriceChanged', handleStorageChange);

        return () => {
          window.removeEventListener('storage', handleStorageChange);
          window.removeEventListener('tunaEntryPriceChanged', handleStorageChange);
        };
      }, []);

      if (loading) {
        return <div style={{ padding: '24px', textAlign: 'center', color: 'var(--ifm-color-secondary)' }}>Loading summary statistics...</div>;
      }

      if (!data || !data.summary || Object.keys(data.summary).length === 0) {
        return <div style={{ padding: '24px', textAlign: 'center', color: 'var(--ifm-color-secondary)' }}>No summary statistics available</div>;
      }

      const summary = data.summary;

      // Calculate custom APR stats if user entry price differs from default
      let customStats = null;
      if (userEntryPrice !== null && userEntryPrice > 0 && userEntryPrice !== 0.05 && data.daily_apr) {
        const customAprValues = data.daily_apr
          .filter(d => d.revenue_per_tuna_usd)
          .map(d => (d.revenue_per_tuna_usd / userEntryPrice) * 100);

        if (customAprValues.length > 0) {
          customStats = {
            current: customAprValues[customAprValues.length - 1],
            average: customAprValues.reduce((a, b) => a + b, 0) / customAprValues.length,
            max: Math.max(...customAprValues),
            min: Math.min(...customAprValues),
          };
        }
      }

      const StatCard = ({ label, referenceValue, yourValue, customValue }) => (
        <div style={{
          padding: '24px',
          background: 'var(--ifm-background-surface-color)',
          border: '1px solid var(--ifm-toc-border-color)',
          borderRadius: 'var(--ifm-global-radius)',
        }}>
          <div style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)', marginBottom: '8px' }}>{label}</div>
          <div style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)', marginTop: '4px' }}>
            Reference: {referenceValue?.toFixed(2)}%
          </div>
          <div style={{ fontSize: '28px', fontWeight: '600', color: label.includes('Current') ? 'var(--accent)' : 'rgba(34, 197, 94, 1)', marginTop: '4px' }}>
            {customValue !== null && customValue !== undefined ? `${customValue.toFixed(2)}%` : `${yourValue?.toFixed(2)}%`}
          </div>
          <div style={{ fontSize: '12px', color: 'var(--ifm-color-secondary)', marginTop: '2px' }}>
            {customValue !== null && customValue !== undefined ? 'Custom APR' : 'Your APR'}
          </div>
        </div>
      );

      return (
        <div style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
          gap: '16px',
          marginBottom: '32px',
        }}>
          <StatCard
            label="Current APR"
            referenceValue={summary.current_reference_apr}
            yourValue={summary.current_your_apr}
            customValue={customStats?.current}
          />
          <StatCard
            label="Average APR"
            referenceValue={summary.average_reference_apr}
            yourValue={summary.average_your_apr}
            customValue={customStats?.average}
          />
          <StatCard
            label="Maximum APR"
            referenceValue={summary.max_reference_apr}
            yourValue={summary.max_your_apr}
            customValue={customStats?.max}
          />
          <StatCard
            label="Minimum APR"
            referenceValue={summary.min_reference_apr}
            yourValue={summary.min_your_apr}
            customValue={customStats?.min}
          />
        </div>
      );
    }

    return <ApySummaryStats />;
  }}
</BrowserOnly>

## APR Development Over Time

<BrowserOnly fallback={<LoadingSpinner />}>
  {() => {
    const ApyChart = require('@site/src/components/Dashboard/ApyChart').default;
    return <ApyChart />;
  }}
</BrowserOnly>

## Methodology

The TUNA staking APR is calculated using the following approach:

### Key Parameters

- **TUNA Supply**: Fixed at 1,000,000,000 tokens
- **Rolling Window**: Up to 30 days of historical revenue data
- **Revenue Source**: Treasury WSOL inflows (validated against DefiTuna API)
- **TUNA Price Source**:
  - **Historical** (before 2025-11-01): `manual_tuna_prices.csv` - manually captured prices
  - **Current/Future** (2025-11-01 onwards): Oracle API snapshots from nightly updates
- **Default Entry Price**: $0.05 (public pre-sale price)
- **USD/SOL Rates**: Daily spot rates derived from DefiTuna staking revenue API

### Calculation Formula

The APR calculation follows these steps:

1. **Rolling Revenue Sum**: Sum of treasury WSOL inflows over the last 30 days (or fewer for early dates)

2. **Annualized Revenue (USD)**:
   ```
   Annualized Revenue USD = (Rolling Revenue Sum USD / Days in Window) × 365
   ```

3. **Revenue per TUNA (USD)**:
   ```
   Revenue per TUNA USD = Annualized Revenue USD / 1,000,000,000
   ```

4. **Reference APR** (based on current market price):
   ```
   Reference APR (%) = (Revenue per TUNA USD / Current TUNA Price USD) × 100
   ```

5. **Your APR** (based on your entry price):
   ```
   Your APR (%) = (Revenue per TUNA USD / Your Entry Price USD) × 100
   ```

### Example Calculation

For a given day with the following data:
- 30-day rolling revenue: $1,850,787 USD
- Current TUNA price: $0.0624 USD (from oracle)
- Your entry price: $0.05 USD (default)

The APR would be calculated as:
```
Annualized Revenue = ($1,850,787 / 30) × 365 = $22,509,605 USD
Revenue per TUNA = $22,509,605 / 1,000,000,000 = $0.02251 USD

Reference APR = ($0.02251 / $0.0624) × 100 = 36.07%
Your APR = ($0.02251 / $0.05) × 100 = 45.02%
```

This shows how early investors with a lower entry price achieve higher APR on the same protocol revenue.

### USD Conversion Methodology

**Daily Spot Rates (Current)**:

As of January 2025, USD values are calculated using **daily spot market rates** fetched from the DefiTuna API. This ensures our USD calculations match the protocol's official values with 100% accuracy.

- **API Endpoint**: `https://api.defituna.com/api/v1/stats/staking/revenue`
- **Rate Calculation**: For each day, USD/SOL rate = (daily USD deposits) / (daily SOL deposits)
- **Accuracy**: 100% match with DefiTuna API (verified daily)

**Example**: On October 10, 2025, the spot rate was $181.11/SOL, so 926.36 SOL revenue = $167,771.22 USD.

**Previous Approach** (deprecated): Used a single historical average rate ($198.98/SOL) for all dates, which caused USD values to differ from the API.

### Data Notes

- **Early History**: For dates with less than 30 days of historical data, the APR is calculated using all available days and annualized accordingly.
- **Price Data Sources**:
  - **Historical** (before 2025-11-01): `manual_tuna_prices.csv` with manually captured TUNA prices in USD
  - **Current/Future** (2025-11-01 onwards): Oracle API snapshots from nightly updates
- **Revenue Validation**: All revenue figures are validated against the DefiTuna public API to ensure 100% accuracy.
- **USD Values**: Calculated using daily spot market rates from the DefiTuna API, ensuring exact match with protocol's official USD values.

## Understanding the Chart

The chart displays:
- **X-axis**: Date
- **Y-axis**: APR in percentage
- **Traces**:
  - **Reference APR** (teal line): APR based on current market price
  - **Your APR / Custom APR** (green dashed line): APR based on your entry price (default $0.05)
- **Hover**: Shows detailed breakdown including:
  - Reference APR and Your/Custom APR percentages
  - Number of days in rolling window
  - Rolling revenue (SOL and USD)
  - TUNA price in USD with source (csv or oracle)

The APR naturally fluctuates based on:
1. **Treasury Revenue**: Higher protocol activity increases treasury inflows
2. **TUNA Price**: Price movements affect the Reference APR calculation
3. **Your Entry Price**: Lower entry prices result in higher Your APR for the same revenue
4. **Historical Window**: Early days with less historical data may show higher volatility

## Personalized APR Feature

The dashboard allows you to calculate your personalized APR based on your actual TUNA entry price.

### How It Works

**Formula**:
```
Custom APR (%) = (Revenue per TUNA in USD / Your Entry Price in USD) × 100
```

**Default**: If no price is entered, defaults to $0.05 (public pre-sale price).

**Example**:
- Market TUNA price: $0.20
- Your entry price: $0.05
- Revenue per TUNA: $0.012

Reference APR: ($0.012 / $0.20) × 100 = **6.0%**
Custom APR: ($0.012 / $0.05) × 100 = **24.0%**

### Features

- **Interactive Input**: Enter your entry price below the chart
- **Dual Chart Traces**: Green dashed line shows your personalized APR
- **Summary Stats**: Each stat card displays both Reference and Custom APR
- **localStorage Persistence**: Your entry price is saved across sessions
- **Real-time Updates**: Chart updates immediately when you change the price

### Why This Matters

If you purchased TUNA at a lower price than the current market price, your effective APR is higher because:
- The protocol revenue is the same
- But your cost basis was lower
- Therefore, your return on investment is higher

This feature helps you understand your actual yield based on your investment, not just the market yield.

## Technical Details

For developers and technical users interested in how the APR calculation works:

- **Backend Documentation**: See `docs/APY_CALCULATION_SYSTEM.md` in the `solana_analytics` repository for complete technical details
- **Component Source**: `frontend/src/components/Dashboard/ApyChart.tsx`
- **Data Source**: `frontend/static/data/apr_data.json` (generated by `tools/compute_apy_data.py`)
- **Price Sources**:
  - Historical: `analysis/manual_tuna_prices.csv`
  - Current/Future: `cache/api_snapshots/{date}.json` (oracle data)

### Data Update Frequency

The APR data is manually updated when:
- New treasury transaction data is loaded
- TUNA price data is updated (CSV or oracle snapshots)
- USD/SOL exchange rates change significantly

For the most current data, check the "Last updated" timestamp in the site header.
