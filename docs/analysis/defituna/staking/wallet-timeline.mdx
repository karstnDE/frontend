---
title: Wallet Timeline
---

import BrowserOnly from '@docusaurus/BrowserOnly';
import LoadingSpinner from '@site/src/components/common/LoadingSpinner';

# Staking Wallet Timeline

Detailed staking history for individual wallet addresses showing balance evolution, realized rewards, and all staking operations over time. Enter any wallet address to view their staked/unstaked TUNA balances, cumulative SOL rewards (claimed + compounded), and complete transaction history with interactive charts and sortable tables.

## Data

<BrowserOnly fallback={<LoadingSpinner />}>
  {() => {
    const { useState, useEffect } = require('react');
    const { useWalletTimeline } = require('@site/src/hooks/useWalletTimeline');
    const WalletTimelineChart = require('@site/src/components/Staking/WalletTimelineChart').default;

    function WalletTimelinePage() {
      const [inputAddress, setInputAddress] = useState('');
      const [searchAddress, setSearchAddress] = useState(null);
      const [currentPage, setCurrentPage] = useState(0);
      const [hoveredRow, setHoveredRow] = useState(null);
      const { data, loading, error } = useWalletTimeline(searchAddress);

      // Parse URL parameters on mount to auto-fill wallet address
      useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const walletParam = params.get('wallet') || params.get('address');

        if (walletParam) {
          const trimmed = walletParam.trim();
          // Validate address length (32-44 characters for Solana addresses)
          if (trimmed.length >= 32 && trimmed.length <= 44) {
            setInputAddress(trimmed);
            setSearchAddress(trimmed); // Auto-trigger search
          }
        }
      }, []); // Run only on mount

      // Reset pagination when searching new wallet
      useEffect(() => {
        setCurrentPage(0);
      }, [searchAddress]);

      const handleSearch = () => {
        const trimmed = inputAddress.trim();
        if (trimmed.length >= 32 && trimmed.length <= 44) {
          setSearchAddress(trimmed);
        } else {
          alert('Please enter a valid Solana wallet address (32-44 characters)');
        }
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter') {
          handleSearch();
        }
      };

      return (
        <div style={{ padding: '0' }}>
          {/* Search Input */}
          <div style={{
            background: 'var(--ifm-background-surface-color)',
            border: '1px solid var(--ifm-toc-border-color)',
            borderRadius: 'var(--ifm-global-radius)',
            padding: '24px',
            marginBottom: '24px',
          }}>
            <label style={{
              display: 'block',
              marginBottom: '12px',
              fontWeight: 600,
              fontSize: '14px',
            }}>
              Wallet Address
            </label>
            <div style={{ display: 'flex', gap: '12px' }}>
              <input
                type="text"
                value={inputAddress}
                onChange={(e) => setInputAddress(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Enter Solana wallet address (e.g., 5MJ6Jx2SJKyTce...)"
                style={{
                  flex: 1,
                  padding: '12px 16px',
                  fontSize: '14px',
                  fontFamily: 'var(--ifm-font-family-monospace)',
                  border: '1px solid var(--ifm-toc-border-color)',
                  borderRadius: 'var(--ifm-global-radius)',
                  background: 'var(--ifm-background-color)',
                  color: 'var(--ifm-font-color-base)',
                }}
              />
              <button
                onClick={handleSearch}
                disabled={loading}
                style={{
                  padding: '12px 32px',
                  fontSize: '14px',
                  fontWeight: 600,
                  color: 'white',
                  background: loading ? '#9CA3AF' : 'var(--accent)',
                  border: 'none',
                  borderRadius: 'var(--ifm-global-radius)',
                  cursor: loading ? 'not-allowed' : 'pointer',
                  transition: 'background 120ms ease',
                }}
                onMouseEnter={(e) => {
                  if (!loading) e.currentTarget.style.background = 'var(--accent-hover)';
                }}
                onMouseLeave={(e) => {
                  if (!loading) e.currentTarget.style.background = 'var(--accent)';
                }}
              >
                {loading ? 'Loading...' : 'Analyze Wallet'}
              </button>
            </div>
            <p style={{
              marginTop: '12px',
              marginBottom: 0,
              fontSize: '13px',
              color: 'var(--ifm-color-secondary)',
            }}>
              Enter any wallet address from the staking cache ({loading ? '...' : '7,861 wallets available'}). No idea which address to enter? Check <a href="/analysis/defituna/staked-tuna" style={{ color: 'var(--accent)', textDecoration: 'none' }}>recent stakers/withdrawers</a> or <a href="https://defituna.com/stake" target="_blank" rel="noopener noreferrer" style={{ color: 'var(--accent)', textDecoration: 'none' }}>DefiTuna Leaderboard</a>.
            </p>
          </div>

          {/* Loading State */}
          {loading && (
            <div style={{
              padding: '48px',
              textAlign: 'center',
              background: 'var(--ifm-background-surface-color)',
              border: '1px solid var(--ifm-toc-border-color)',
              borderRadius: 'var(--ifm-global-radius)',
            }}>
              <LoadingSpinner />
              <p style={{ marginTop: '16px', color: 'var(--ifm-color-secondary)' }}>
                Loading wallet timeline...
              </p>
            </div>
          )}

          {/* Error State */}
          {error && !loading && (
            <div style={{
              padding: '24px',
              background: 'var(--ifm-background-surface-color)',
              border: '1px solid var(--ifm-color-danger)',
              borderRadius: 'var(--ifm-global-radius)',
              color: 'var(--ifm-color-danger)',
            }}>
              <h3 style={{ marginTop: 0 }}>Error Loading Wallet</h3>
              <p>{error}</p>
              <p style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)', marginTop: '16px', marginBottom: 0 }}>
                Please check the wallet address and try again. The wallet must exist in the staking cache (active from 2025-07-25 onwards).
              </p>
            </div>
          )}

          {/* Chart and Summary */}
          {data && data.found && !loading && (
            <>
              {/* Summary Stats */}
              <div style={{
                background: 'var(--ifm-background-surface-color)',
                border: '1px solid var(--ifm-toc-border-color)',
                borderRadius: 'var(--ifm-global-radius)',
                padding: '24px',
                marginBottom: '24px',
              }}>
                <h3 style={{ marginTop: 0, marginBottom: '16px' }}>Wallet Summary</h3>
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                  gap: '16px',
                }}>
                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Current Staked
                    </div>
                    <div style={{ fontSize: '20px', fontWeight: 600, color: 'var(--accent)' }}>
                      {data.summary.current_staked.toLocaleString(undefined, { maximumFractionDigits: 2 })} TUNA
                    </div>
                  </div>

                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Current Unstaked
                    </div>
                    <div style={{ fontSize: '20px', fontWeight: 600 }}>
                      {data.summary.current_unstaked.toLocaleString(undefined, { maximumFractionDigits: 2 })} TUNA
                    </div>
                  </div>

                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Realized Rewards
                    </div>
                    <div style={{ fontSize: '20px', fontWeight: 600, color: '#F59E0B' }}>
                      {data.summary.realized_rewards.toLocaleString(undefined, { maximumFractionDigits: 4 })} SOL
                    </div>
                    <div style={{ fontSize: '12px', color: 'var(--ifm-color-secondary)', marginTop: '4px' }}>
                      Claimed + Compounded
                    </div>
                  </div>

                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Total Operations
                    </div>
                    <div style={{ fontSize: '20px', fontWeight: 600 }}>
                      {data.summary.total_operations.toLocaleString()}
                    </div>
                  </div>

                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Active Since
                    </div>
                    <div style={{ fontSize: '16px', fontWeight: 600 }}>
                      {new Date(data.summary.first_stake_date).toLocaleDateString()}
                    </div>
                    <div style={{ fontSize: '12px', color: 'var(--ifm-color-secondary)', marginTop: '4px' }}>
                      {data.summary.days_active} days
                    </div>
                  </div>

                  <div>
                    <div style={{ fontSize: '13px', color: 'var(--ifm-color-secondary)', marginBottom: '4px' }}>
                      Last Activity
                    </div>
                    <div style={{ fontSize: '16px', fontWeight: 600 }}>
                      {new Date(data.summary.last_activity_date).toLocaleDateString()}
                    </div>
                  </div>
                </div>

                <div style={{
                  marginTop: '16px',
                  padding: '12px',
                  background: 'var(--ifm-background-color)',
                  borderRadius: '6px',
                  fontSize: '13px',
                  color: 'var(--ifm-color-secondary)',
                }}>
                  ‚ÑπÔ∏è <strong>Note:</strong> Realized rewards are shown in SOL (claimed and compounded amounts). Unclaimed rewards are not shown.
                </div>
              </div>

              <WalletTimelineChart data={data} />

              {/* Transactions Table */}
              {(() => {
                const { tableStyles, tableRowHoverHandlers, linkHoverHandlers } = require('@site/src/styles/tableStyles');

                // Reverse operations to show newest first
                const reversedOperations = [...data.operations].reverse();
                const pageSize = 10;
                const totalPages = Math.ceil(reversedOperations.length / pageSize);
                const startIdx = currentPage * pageSize;
                const endIdx = startIdx + pageSize;
                const pageOperations = reversedOperations.slice(startIdx, endIdx);

                const operationColors = {
                  initialize: '#8B5CF6',
                  stake: '#10B981',
                  unstake: '#EF4444',
                  compound: '#3B82F6',
                  claim: '#F59E0B',
                  withdraw: '#F97316',
                  unknown: '#6B7280',
                };

                return (
                  <div style={tableStyles.container}>
                    <h3 style={{ marginTop: 0, marginBottom: '16px' }}>Wallet Transactions ({reversedOperations.length}) ‚Äî Newest First ‚ñº</h3>

                    <div style={{ overflowX: 'auto' }}>
                      <table style={tableStyles.table}>
                        <thead>
                          <tr style={tableStyles.headerRow}>
                            <th style={tableStyles.headerCell}>#</th>
                            <th style={tableStyles.headerCell}>Date</th>
                            <th style={tableStyles.headerCell}>Type</th>
                            <th style={tableStyles.headerCell}>Amount</th>
                            <th style={tableStyles.headerCell}>Transaction</th>
                          </tr>
                        </thead>
                        <tbody>
                          {pageOperations.map((op, idx) => {
                            const globalIdx = startIdx + idx;
                            const unit = (op.type === 'compound' || op.type === 'claim') ? 'SOL' : 'TUNA';
                            const decimals = (op.type === 'compound' || op.type === 'claim') ? 4 : 2;

                            return (
                              <tr
                                key={globalIdx}
                                style={tableStyles.bodyRow}
                                {...tableRowHoverHandlers}
                              >
                                <td style={tableStyles.rankCell}>
                                  #{globalIdx + 1}
                                </td>
                                <td style={{ ...tableStyles.dateCell, fontSize: '12px', fontFamily: 'var(--ifm-font-family-monospace)' }}>
                                  {new Date(op.date).toLocaleString()}
                                </td>
                                <td style={tableStyles.cell}>
                                  <span style={{
                                    display: 'inline-block',
                                    padding: '4px 8px',
                                    borderRadius: '4px',
                                    fontSize: '12px',
                                    fontWeight: 600,
                                    color: 'white',
                                    background: operationColors[op.type] || operationColors.unknown,
                                  }}>
                                    {op.type_label}
                                  </span>
                                </td>
                                <td style={{ ...tableStyles.cell, fontWeight: 600 }}>
                                  {op.amount.toLocaleString(undefined, { minimumFractionDigits: decimals, maximumFractionDigits: decimals })} {unit}
                                </td>
                                <td style={tableStyles.addressCell}>
                                  <a
                                    href={op.solscan_url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    style={tableStyles.link}
                                    {...linkHoverHandlers}
                                  >
                                    {op.signature.slice(0, 8)}...{op.signature.slice(-8)}
                                  </a>
                                </td>
                              </tr>
                            );
                          })}
                        </tbody>
                      </table>
                    </div>

                    {/* Pagination */}
                    {totalPages > 1 && (
                      <div style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                        marginTop: '16px',
                        paddingTop: '16px',
                        borderTop: '1px solid var(--ifm-toc-border-color)',
                      }}>
                        <div style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)' }}>
                          Showing {startIdx + 1}-{Math.min(endIdx, reversedOperations.length)} of {reversedOperations.length}
                        </div>
                        <div style={{ display: 'flex', gap: '8px' }}>
                          <button
                            onClick={() => setCurrentPage(Math.max(0, currentPage - 1))}
                            disabled={currentPage === 0}
                            style={{
                              padding: '8px 16px',
                              fontSize: '14px',
                              fontWeight: 600,
                              color: currentPage === 0 ? 'var(--ifm-color-secondary)' : 'var(--ifm-font-color-base)',
                              background: 'var(--ifm-background-surface-color)',
                              border: '1px solid var(--ifm-toc-border-color)',
                              borderRadius: 'var(--ifm-global-radius)',
                              cursor: currentPage === 0 ? 'not-allowed' : 'pointer',
                            }}
                          >
                            Previous
                          </button>
                          <div style={{
                            padding: '8px 16px',
                            fontSize: '14px',
                            color: 'var(--ifm-color-secondary)',
                          }}>
                            Page {currentPage + 1} of {totalPages}
                          </div>
                          <button
                            onClick={() => setCurrentPage(Math.min(totalPages - 1, currentPage + 1))}
                            disabled={currentPage === totalPages - 1}
                            style={{
                              padding: '8px 16px',
                              fontSize: '14px',
                              fontWeight: 600,
                              color: currentPage === totalPages - 1 ? 'var(--ifm-color-secondary)' : 'var(--ifm-font-color-base)',
                              background: 'var(--ifm-background-surface-color)',
                              border: '1px solid var(--ifm-toc-border-color)',
                              borderRadius: 'var(--ifm-global-radius)',
                              cursor: currentPage === totalPages - 1 ? 'not-allowed' : 'pointer',
                            }}
                          >
                            Next
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                );
              })()}
            </>
          )}

          {/* Wallet Not Found */}
          {data && !data.found && !loading && !error && (
            <div style={{
              padding: '48px',
              textAlign: 'center',
              background: 'var(--ifm-background-surface-color)',
              border: '1px solid var(--ifm-toc-border-color)',
              borderRadius: 'var(--ifm-global-radius)',
            }}>
              <h3>Wallet Not Found</h3>
              <p style={{ color: 'var(--ifm-color-secondary)' }}>
                {data.error || 'This wallet is not in the staking cache.'}
              </p>
              <p style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)' }}>
                The cache contains 7,861 wallets active from 2025-07-25 onwards.
              </p>
            </div>
          )}
        </div>
      );
    }

    return <WalletTimelinePage />;
  }}
</BrowserOnly>

## Use Cases

This page helps you:

- **Track individual wallet behavior**: Monitor any wallet's staking activity, commitment level, and reward strategies over time
- **Analyze whale patterns**: Study large stakers to understand their behavior, when they stake/unstake, and how they manage rewards
- **Review your own portfolio**: Analyze your wallet's performance, engagement patterns, and reward accumulation
- **Identify staker archetypes**: Distinguish between compounders (reinvest rewards), claimers (extract rewards), HODLers (long-term holds), and active traders (frequent operations)
- **Benchmark performance**: Compare wallet strategies against successful patterns or your own approach
- **Share wallet analysis**: Use URL parameters (?wallet=ADDRESS) to share pre-filled analysis links with others
- **Investigate transactions**: Click any operation in the table to view the full transaction on Solscan

## How to Read This Chart

**How to Use:**

1. Enter a Solana wallet address in the search box
2. Click "Analyze Wallet" or press Enter
3. View complete staking history with wallet summary, timeline chart, and transaction table

**URL Parameters**: Share direct links with pre-filled addresses using `?wallet=ADDRESS` or `?address=ADDRESS`

**Wallet Summary Metrics:**
- **Current Staked**: TUNA currently locked in staking positions
- **Current Unstaked**: TUNA held liquid by the wallet
- **Realized Rewards**: Cumulative SOL from claimed + compounded rewards (unclaimed rewards not shown)
- **Total Operations**: Count of all staking transactions
- **Active Since**: First staking transaction date and total days active
- **Last Activity**: Most recent staking transaction date

**Timeline Chart Elements:**
- **Stacked Area (Teal + Gray)**: TUNA balance split between staked (bottom, teal) and unstaked (top, gray)
- **Dashed Gold Line (Right Y-axis)**: Cumulative realized rewards in SOL (claimed + compounded)
- **Colored Dots**: Individual staking operations with distinct shapes and colors:
  - üü£ Purple diamond = Initialize Position
  - üü¢ Green circle = Stake
  - üî¥ Red circle = Unstake
  - üîµ Blue triangle = Compound
  - üü° Gold star = Claim Rewards
  - üü† Orange square = Withdraw

**Wallet Transactions Table:**
- Shows all staking operations sorted newest first (indicated by ‚ñº)
- **#**: Transaction number in chronological order
- **Date**: Timestamp of operation
- **Type**: Color-coded badge showing operation type
- **Amount**: TUNA amount (for stake/unstake) or SOL amount (for claim/compound)
- **Transaction**: Clickable signature linking to Solscan
- **Pagination**: 10 transactions per page with Previous/Next navigation

**Interactive Features:**
- **Hover on chart areas**: See exact staked/unstaked balance amounts at any point in time
- **Hover on dots**: View operation details (type, amount, transaction signature)
- **Click transaction links**: Opens full transaction details in Solscan block explorer
- **Zoom & Pan**: Use mouse to zoom into specific time periods on the chart
- **Toggle legend**: Click legend items to show/hide specific data series

## Methodology

<details>
<summary>Click to expand technical details</summary>

**Data Sources**

- **Staker cache**: Compressed snapshot of all staking positions and operations (`staker_cache.json.gz`)
- **On-chain transactions**: Staking instructions from DefiTuna staking program
- **Balance tracking**: Daily snapshots of staked and unstaked TUNA balances
- **Reward calculations**: Realized rewards from claim and compound operations

For complete pipeline details, see [Data Pipeline](/analysis/methodology).

**Wallet Lookup Process**

1. **Address validation**: Input validated as 32-44 character Solana address
2. **Cache search**: Wallet looked up in staker cache (7,861 wallets active from 2025-07-25 onwards)
3. **Timeline reconstruction**: All operations sorted chronologically to rebuild balance history
4. **Metrics calculation**: Summary statistics computed from operation history

**Balance Calculation**

Daily staked and unstaked balances are calculated by:

1. **Starting balances**: Begin with earliest known state (or zero if cache started after first stake)
2. **Operation application**: Each stake/unstake/withdraw operation adjusts balances
3. **Daily snapshots**: End-of-day balances recorded in UTC timezone
4. **Compound handling**: Compounded rewards increase staked balance
5. **Claim handling**: Claimed rewards tracked separately as realized SOL

**Realized Rewards Tracking**

Realized rewards represent SOL that has been extracted or compounded:

- **Claim operations**: SOL sent to wallet (adds to realized rewards)
- **Compound operations**: SOL reinvested as TUNA stake (adds to realized rewards and staked balance)
- **Cumulative total**: Running sum of all claim + compound amounts
- **Unclaimed rewards**: Not included in current version

**Operation Types**

Each transaction is classified as one of these types:

- **Initialize**: Create new staking position (first transaction)
- **Stake**: Add TUNA to staking position
- **Unstake**: Begin unstaking process (tokens become available after cooldown)
- **Compound**: Reinvest rewards as additional stake
- **Claim**: Extract rewards as SOL
- **Withdraw**: Complete unstake and receive TUNA

**Relationship to Other Views**

This wallet-level detail complements:
- **[Stakers](/analysis/defituna/usage-statistics/usage-statistics-stakers)**: Shows all active stakers ranked by activity
- **[Staking Overview](/analysis/defituna/staked-tuna)**: Shows treasury's total staked/unstaked allocation
- **[Staker Conviction](/analysis/defituna/staker-conviction)**: Analyzes long-term staker behavior patterns

**Date Range and Limitations**

- **Data start**: 2025-07-25 (when staker cache tracking began)
- **Pre-existing positions**: Wallets with stakes before 2025-07-25 may show incomplete balance history
- **Cache size**: 7,861 wallets tracked (wallets with at least one operation since 2025-07-25)
- **Update frequency**: Data refreshes when staker cache is rebuilt (not real-time)
- **Realized rewards only**: Shows claimed + compounded SOL; unclaimed rewards not included
- **Operation granularity**: Each transaction counted as one operation regardless of size

**Known Limitations**

- Balance history for wallets staking before 2025-07-25 may not show full position size at cache start
- Unclaimed rewards not tracked (requires additional on-chain queries)
- Multi-wallet users (same person, multiple addresses) counted separately
- No cross-wallet aggregation for institutional holders
- Pagination limited to 10 transactions per page for performance

</details>
