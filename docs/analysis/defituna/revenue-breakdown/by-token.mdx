---
title: Revenue by Token
---

import BrowserOnly from '@docusaurus/BrowserOnly';
import LoadingSpinner from '@site/src/components/common/LoadingSpinner';

# Revenue Breakdown by Token

Displays protocol revenue contribution across different tokens. Click on a token bar to display the top 10 contributing transactions for this token. Signature and token mint address are linked to Solscan.

## Data {#data}

<BrowserOnly fallback={<div style={{ minHeight: '800px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}><LoadingSpinner /></div>}>
  {() => {
    const { useState, useEffect } = require('react');
    const { useDashboardData } = require('@site/src/components/Dashboard/useDashboardData');
    const BreakdownChart = require('@site/src/components/Dashboard/BreakdownChart').default;
    const TopTransactionsTable = require('@site/src/components/Dashboard/TopTransactionsTable').default;

    function RevenueDashboard() {
      const data = useDashboardData();
      const [selectedId, setSelectedId] = useState(null);
      const [selectedLabel, setSelectedLabel] = useState(null);

      const handleBarClick = (id, label) => {
        setSelectedId(id);
        setSelectedLabel(label);
      };

      const clearFilter = () => {
        setSelectedId(null);
        setSelectedLabel(null);
      };

      // Fix scroll position after component loads
      useEffect(() => {
        if (!data.loading && window.location.hash) {
          setTimeout(() => {
            const id = window.location.hash.slice(1);
            const element = document.getElementById(id);
            if (element) {
              element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          }, 100);
        }
      }, [data.loading]);

      if (data.loading) {
        return <LoadingSpinner />;
      }

      if (data.error) {
        return (
          <div style={{
            padding: '32px',
            background: 'var(--ifm-background-surface-color)',
            border: '1px solid var(--ifm-color-danger)',
            borderRadius: 'var(--ifm-global-radius)',
            color: 'var(--ifm-color-danger)',
          }}>
            <div style={{ fontSize: '1.25rem', fontWeight: 600, marginBottom: '8px' }}>Error Loading Dashboard</div>
            <p>{data.error}</p>
          </div>
        );
      }

      const summary = data.summary;
      if (!summary) {
        return <div>No data available</div>;
      }

      return (
        <div>
          <BreakdownChart
            summary={summary}
            groupMode="token"
            onBarClick={handleBarClick}
          />

          {selectedLabel && (
            <div style={{
              marginBottom: '16px',
              marginTop: '24px',
              display: 'flex',
              alignItems: 'center',
              gap: '12px'
            }}>
              <span style={{ fontSize: '14px', color: 'var(--ifm-color-secondary)' }}>
                Filtered by: <strong>{selectedLabel}</strong>
              </span>
              <button
                onClick={clearFilter}
                style={{
                  padding: '6px 12px',
                  fontSize: '13px',
                  background: 'var(--ifm-color-emphasis-200)',
                  border: '1px solid var(--ifm-toc-border-color)',
                  borderRadius: 'var(--ifm-global-radius)',
                  cursor: 'pointer',
                  color: 'var(--ifm-font-color-base)',
                }}
              >
                Clear Filter
              </button>
            </div>
          )}

          <div style={{ marginTop: '32px' }}>
            <TopTransactionsTable
              topTransactionsToken={data.topTransactionsToken}
              topTransactionsType={data.topTransactionsType}
              topTransactionsPool={data.topTransactionsPool}
              groupMode="token"
              selectedFilter={selectedId}
              selectedFilterLabel={selectedLabel}
              summary={summary}
            />
          </div>
        </div>
      );
    }

    return <RevenueDashboard />;
  }}
</BrowserOnly>

## Use Cases {#use-cases}

This chart helps you:

- **Analyze revenue composition**: Track which tokens contribute to treasury inflows over time
- **Investigate specific tokens**: Click bars to examine individual transactions for any token
- **Compare token contributions**: Evaluate relative contribution across different token mints
- **Cross-reference revenue sources**: Link token data with [transaction type](./by-type) and [pool](./by-pool) breakdowns
- **Export transaction details**: Use the table to identify and investigate specific revenue events

## How to Read This Chart {#how-to-read}

- **Bar height**: Each token's total revenue contribution in SOL
- **X-axis**: Token mints (labels may be truncated for display)
- **Y-axis**: Revenue amount in SOL
- **Interactions**:
  - Click on bars to filter the transaction table below
  - Hover over segments to see exact SOL amounts

## Methodology {#methodology}

<details>
<summary>Click to expand technical details</summary>

**Data Sources**

- **Treasury transactions**: On-chain data from DefiTuna treasury PDA (`G9XfJoY81n8A9bZKaJFhJYomRrcvFkuJ22em2g8rZuCh`)
- **Token conversions**: Conversion rates derived from actual swap transactions in treasury data
- **Attribution system**: 100% accurate transaction classification using log-based analysis

**Calculation Method**

All token revenues are converted to SOL equivalents using same-day conversion rates from actual swap transactions recorded in the treasury. This approach ensures:

1. **Timing accuracy**: Conversion rates reflect the market conditions when transactions occurred
2. **Real rates**: Uses actual swap rates rather than external price feeds
3. **Cross-token comparability**: All values normalized to SOL for consistent comparison

**Revenue Classification**

Each transaction is classified using the [revenue attribution system](/analysis/defituna/revenue-breakdown/by-type), which achieves 100% attribution accuracy through log-based pattern matching.

**Update Frequency**

Data is manually updated when new treasury transactions are processed. Check the "Last updated" timestamp in the site header for data freshness.

**Known Limitations**

- Conversion rates based on treasury swap prices (may differ from market mid-price by a few basis points)
- Small tokens contributing less than 0.1% of total revenue may be grouped into "Other" category
- Historical view shows cumulative data; individual transaction dates available in the table
- Does not include unrealized gains from currently held token positions

</details>
