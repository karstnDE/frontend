---
title: Pools vs. Types
---

import BrowserOnly from '@docusaurus/BrowserOnly';
import LoadingSpinner from '@site/src/components/common/LoadingSpinner';

# Revenue Breakdown: Pools vs. Types

This page shows the **two-dimensional revenue distribution** using a Marimekko chart that combines both pool and transaction type perspectives in a single visualization.

## Overview

<BrowserOnly fallback={<LoadingSpinner />}>
  {() => {
    const { useState, useEffect } = require('react');
    const PoolTypeMatrixChart = require('@site/src/components/Dashboard/PoolTypeMatrixChart').default;
    const TopTransactionsTable = require('@site/src/components/Dashboard/TopTransactionsTable').default;
    
    function PoolTypeMatrix() {
      const [selectedSegment, setSelectedSegment] = useState(null);
      const [topTransactionsPool, setTopTransactionsPool] = useState({});
      const [topTransactionsPoolType, setTopTransactionsPoolType] = useState({});
      const [summary, setSummary] = useState(null);
      const [loading, setLoading] = useState(true);

      useEffect(() => {
        Promise.all([
          fetch('/data/top_transactions_pool.json').then(res => res.json()),
          fetch('/data/top_transactions_pool_type.json').then(res => res.json()),
          fetch('/data/summary.json').then(res => res.json())
        ])
          .then(([poolData, poolTypeData, summaryData]) => {
            setTopTransactionsPool(poolData);
            setTopTransactionsPoolType(poolTypeData);
            setSummary(summaryData);
            setLoading(false);
          })
          .catch(err => {
            console.error('Error loading transaction data:', err);
            setLoading(false);
          });
      }, []);

      const handleSegmentClick = (poolId, poolLabel, displayName, technicalTypes) => {
        setSelectedSegment({ poolId, poolLabel, displayName, technicalTypes });
      };

      const handleClearFilter = () => {
        setSelectedSegment(null);
      };

      return (
        <div style={{ padding: '24px 0' }}>
          <PoolTypeMatrixChart onSegmentClick={handleSegmentClick} />

          {selectedSegment && (
            <div style={{
              padding: '16px',
              background: 'var(--ifm-background-surface-color)',
              border: '1px solid var(--accent)',
              borderRadius: 'var(--ifm-global-radius)',
              marginBottom: '24px',
            }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                <span>
                  <strong>Filtered by:</strong> {selectedSegment.poolLabel}
                  {selectedSegment.displayName && (
                    <>
                      <span style={{ margin: '0 8px', color: 'var(--ifm-color-secondary)' }}>â†’</span>
                      <span style={{ color: 'var(--accent)' }}>{selectedSegment.displayName}</span>
                    </>
                  )}
                </span>
                <button
                  onClick={handleClearFilter}
                  style={{
                    padding: '6px 16px',
                    background: 'var(--accent)',
                    color: 'white',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer',
                    fontSize: '14px',
                  }}
                >
                  Clear Filter
                </button>
              </div>
            </div>
          )}

          {!loading && (
            <TopTransactionsTable
              topTransactionsToken={{}}
              topTransactionsType={{}}
              topTransactionsPool={topTransactionsPool}
              topTransactionsPoolType={topTransactionsPoolType}
              groupMode="pool"
              selectedFilter={selectedSegment?.poolId}
              selectedFilterLabel={selectedSegment?.poolLabel}
              typeFilter={selectedSegment?.technicalTypes}
              summary={summary}
            />
          )}
        </div>
      );
    }
    
    return <PoolTypeMatrix />;
  }}
</BrowserOnly>


This page shows the **two-dimensional revenue distribution** using a Marimekko chart that combines both pool and transaction type perspectives in a single visualization.

## Understanding the Marimekko Chart

The Marimekko (also called mosaic or market map) chart provides a powerful two-dimensional view of revenue:

### Chart Dimensions

- **X-axis (Width)**: Each vertical strip represents a **liquidity pool**
  - Width is proportional to the pool's share of total revenue
  - Wider pools = larger revenue contribution

- **Y-axis (Height)**: Within each pool, segments show **transaction types**
  - Height represents the SOL amount for that type within the pool
  - Segments are stacked to show composition

- **Area**: The area of each colored segment = revenue from that specific pool-type combination
  - Larger areas = more significant revenue sources

### Visual Interpretation

This chart answers questions like:
- Which pool generates the most revenue? (widest strip)
- What transaction types dominate each pool? (tallest segments)
- Which pool-type combinations are most valuable? (largest areas)
- How does transaction composition vary across pools? (segment patterns)

### Color Coding

- **Each color** represents a specific transaction type
- **Same color across pools** = same transaction type in different pools
- **Legend** shows all transaction types present in the data

### Interactive Features

- **Hover**: See exact SOL amounts and percentages for each pool-type segment
- **Click segments**: Select specific pool-type combinations (feature in development)
- **Legend**: Click legend items to show/hide specific transaction types

## Key Insights

This combined view reveals:

### Pool-Level Patterns

- **Pool Specialization**: Some pools may focus on specific transaction types
- **Pool Diversity**: How varied is the transaction mix within each pool?
- **Pool Dominance**: Which pools drive the most revenue across all types?

### Type-Level Patterns

- **Type Distribution**: Which transaction types appear across multiple pools?
- **Type Concentration**: Are certain types concentrated in specific pools?
- **Type Magnitude**: Which types generate the most revenue overall?

### Strategic Implications

- **Risk Concentration**: Are you over-reliant on specific pool-type combinations?
- **Diversification Opportunities**: Which pools could expand their transaction types?
- **Pool Efficiency**: Which pools generate the best returns per transaction type?

## Comparing with Other Views

This cross-dimensional view complements the other breakdowns:

- **[By Token](./by-token)**: Shows which tokens flow through which pool-type combinations
- **[By Type](./by-type)**: Aggregates all pools to show overall type dominance
- **[By Pool](./by-pool)**: Aggregates all types to show overall pool performance

The Marimekko shows how pools and types **interact**, revealing patterns hidden in single-dimension views.

## Analysis Tips

### Identifying High-Value Combinations

Look for large rectangular areas:
- These represent pool-type combinations with substantial revenue
- Focus optimization efforts on these high-value segments

### Spotting Unusual Patterns

Watch for:
- **Narrow but tall segments**: High concentration in one type within a small pool
- **Wide but short segments**: Revenue spread thinly across many types in a major pool
- **Missing combinations**: Pool-type pairs with no revenue (gaps in expected patterns)

### Comparative Analysis

Compare pool strips:
- **Similar patterns**: Pools with similar transaction type distributions
- **Unique patterns**: Pools with distinctive type compositions
- **Size vs. complexity**: Do larger pools have more diverse types, or stay focused?

### Temporal Context

For changes over time:
- Visit **[Tx Type per Day](../tx-type-per-day)** to see how these patterns evolve
- Check **[Orca vs. Fusion](../orca-vs-fusion)** for ecosystem-level trends

## Technical Details

The Marimekko chart is built from the `pool_type_summary.json` data file which contains:

- **Pool dimension**: All liquidity pools with their total contributions
- **Type dimension**: Transaction types within each pool with SOL amounts
- **Proportional sizing**: Both width (pool) and height (type) scaled by actual values

This ensures the visual representation accurately reflects the underlying revenue distribution.

## Methodology

Data for this visualization comes from the revenue attribution system:

1. Each transaction is classified by type and attributed to a pool
2. Revenue is aggregated by pool-type combination
3. Proportions are calculated relative to total revenue
4. The Marimekko layout is computed to preserve both dimensions

All values maintain 100% attribution accuracy, ensuring the chart represents true on-chain revenue distribution.
