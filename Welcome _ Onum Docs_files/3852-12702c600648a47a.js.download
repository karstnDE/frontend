"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3852],{13885:(e,t,n)=>{n.r(t),n.d(t,{AIResponseFeedback:()=>u});var s=n(54202),a=n(83372),l=n(38103),r=n(23449),i=n(59282),o=n(70932),c=n(86181);function u(e){let{className:t,responseId:n,query:u}=e,d=(0,a.ok)(),[m,h]=(0,i.useState)(null),p=(0,o.jt)(),f=e=>{h(e),p({type:"ask_rate_response",query:u,responseId:n,rating:e})};return(0,s.jsxs)("div",{className:(0,r.P)("flex h-fit items-center",t),children:[(0,s.jsx)(c.$n,{icon:"thumbs-up",iconOnly:!0,label:(0,l.s)(d,"was_this_helpful_positive_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==m&&1!==m&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDuration:".5s"},onClick:()=>f(1),disabled:null!==m,active:1===m},"positive"),(0,s.jsx)(c.$n,{icon:"thumbs-down",iconOnly:!0,label:(0,l.s)(d,"was_this_helpful_negative_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==m&&-1!==m&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDelay:".2s",animationDuration:".5s"},onClick:()=>f(-1),disabled:null!==m,active:-1===m},"negative"),null!==m?(0,s.jsx)("span",{className:"ml-2 animate-fade-in-slow text-tint-subtle",style:{animationDelay:".3s"},children:(0,l.t)(d,"was_this_helpful_thank_you")}):null]})}},24066:(e,t,n)=>{n.r(t),n.d(t,{AIChatControlButton:()=>c});var s=n(54202),a=n(83372),l=n(38103),r=n(57246),i=n(63243),o=n(86181);function c(){let e=(0,a.ok)(),t=(0,i.J4)(),n=(0,i.C8)();return t.messages.length>0?(0,s.jsx)(o.rI,{button:(0,s.jsx)(o.$n,{onClick:()=>{},iconOnly:!0,icon:"ellipsis",label:(0,l.s)(e,"actions"),variant:"blank",size:"default"}),children:(0,s.jsxs)(o._2,{onClick:()=>{n.clear()},children:[(0,s.jsx)(r.Icon,{icon:"broom-wide",className:"size-3 shrink-0 text-tint-subtle"}),(0,l.t)(e,"ai_chat_clear_conversation")]})}):null}},30481:(e,t,n)=>{n.r(t),n.d(t,{AIChatProvider:()=>v,useAIChatController:()=>b,useAIChatState:()=>g});var s=n(54202),a=n(80532),l=n(83372),r=n(38103),i=n(64928),o=n(59282),c=n(70932),u=n(99682),d=n(81493),m=n(41758);let h=(0,m.createServerReference)("400aeadb7ad72aa5617339ecda6a34df99511e2912",m.callServer,void 0,m.findSourceMapURL,"streamAIChatResponse");var p=n(10330);let f=o.createContext(null),x=a.v(()=>({opened:!1,responseId:null,messages:[],query:null,followUpSuggestions:[],pendingTools:[],loading:!1,error:!1,initialQuery:null}));function g(){return a.P(x)}function v(e){let{renderMessageOptions:t,children:n}=e,a=function(){let e=function(){let e=(0,p.aP)();return o.useMemo(()=>({location:e?{spaceId:e.spaceId,pageId:e.pageId}:void 0}),[e])}(),t=o.useRef(e);return o.useEffect(()=>{t.current=e},[e]),t}(),m=(0,c.jt)(),[,g]=(0,d.SQ)(),v=(0,l.ok)(),b=o.useCallback(()=>{let{initialQuery:e}=x.getState();x.setState(e=>({...e,opened:!0})),g(t=>{var n,s,a,l;return{ask:null!=(s=null!=(n=null==t?void 0:t.ask)?n:e)?s:"",query:null!=(a=null==t?void 0:t.query)?a:null,scope:null!=(l=null==t?void 0:t.scope)?l:"default",open:!1}})},[g]),y=o.useCallback(()=>{x.setState(e=>({...e,opened:!1})),g(e=>{var t,n;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}})},[g]),_=o.useCallback(async e=>{x.setState(e=>({...e,followUpSuggestions:[],pendingTools:[],loading:!0,error:!1,messages:[...e.messages,{role:i.W7.Assistant,content:null}]}));let n=async e=>{let t=u.By.getState().tools.find(t=>t.name===e.toolCall.tool);if(!t)throw Error("Tool ".concat(e.toolCall.tool," not found"));try{let n=await t.execute(e.toolCall.input);_({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:n.output,summary:n.summary}})}catch(t){_({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:{error:t instanceof Error?t.message:"Unknown error"},summary:{icon:"bomb",text:"An error occurred while executing the tool"}}})}},s=null;try{var l,o,c,d;let m=u.By.getState().tools;for await(let u of(await h({message:e.message,toolCall:e.toolCall,messageContext:a.current,previousResponseId:null!=(l=x.getState().responseId)?l:void 0,tools:m.map(e=>({name:e.name,description:e.description,inputSchema:e.inputSchema})),options:{withLinkPreviews:null==(o=null==t?void 0:t.withLinkPreviews)||o,withToolCalls:null==(c=null==t?void 0:t.withToolCalls)||c,asEmbeddable:null!=(d=null==t?void 0:t.asEmbeddable)&&d}}))){if(!u)continue;if(e.message&&x.getState().query!==e.message)break;let t=u.event;switch(t.type){case"response_finish":x.setState(e=>({...e,responseId:t.responseId,loading:!1,error:!1}));break;case"response_followup_suggestion":x.setState(e=>({...e,followUpSuggestions:[...e.followUpSuggestions,...t.suggestions]}));break;case"response_tool_call_pending":{let e=m.find(e=>e.name===t.toolCall.tool);if(!e)throw Error("Tool ".concat(t.toolCall.tool," not found"));let a=e.confirmation;a?x.setState(e=>({...e,pendingTools:[...e.pendingTools,{icon:a.icon,label:a.label,cancelToolCall:{tool:t.toolCall.tool,toolCallId:t.toolCallId,output:{cancelled:"User did not confirm the tool call"},summary:{icon:"forward",text:(0,r.s)(v,"tool_call_skipped",a.label)}},confirm:async()=>{await n(t)}}]})):s=t}}x.setState(e=>({...e,messages:[...e.messages.slice(0,-1),{role:i.W7.Assistant,content:u.content}]}))}s&&await n(s),x.setState(e=>({...e,loading:!1,error:!1}))}catch(e){console.error("Error streaming AI response",e),x.setState(e=>({...e,loading:!1,error:!0}))}},[a.current,null==t?void 0:t.withLinkPreviews,null==t?void 0:t.withToolCalls,null==t?void 0:t.asEmbeddable,v]),k=o.useCallback(async e=>{let{query:t,messages:n,pendingTools:s}=x.getState();if(0===n.length&&g(t=>{var n,s;return{ask:e.message,query:null!=(n=null==t?void 0:t.query)?n:null,scope:null!=(s=null==t?void 0:t.scope)?s:"default",open:!1}}),t===e.message)return;m({type:"ask_question",query:e.message}),x.setState(t=>{var n;return{...t,messages:[...t.messages,{role:i.W7.User,content:e.message,query:e.message}],query:e.message,followUpSuggestions:[],loading:!0,error:!1,initialQuery:null!=(n=t.initialQuery)?n:e.message}});let a=s[0];_({message:e.message,...a?{toolCall:a.cancelToolCall}:{}})},[g,m,_]),j=o.useCallback(()=>{x.setState(e=>({opened:e.opened,loading:!1,messages:[],query:null,followUpSuggestions:[],pendingTools:[],responseId:null,error:!1,initialQuery:null})),g(e=>{var t,n;return{ask:"",query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}})},[g]),w=o.useMemo(()=>({open:b,close:y,clear:j,postMessage:k}),[b,y,j,k]);return(0,s.jsx)(f.Provider,{value:w,children:n})}function b(){let e=o.useContext(f);if(!e)throw Error("useAIChatController must be used within an AIChatProvider");return e}},34357:(e,t,n)=>{n.r(t),n.d(t,{ThemeToggler:()=>o});var s=n(54202),a=n(83593),l=n(59282),r=n(83372),i=n(86181);function o(){let e=(0,r.ok)(),[t,n]=l.useState(!1),{theme:o,setTheme:u}=(0,a.D)();l.useEffect(()=>{n(!0)},[]);let d=e=>{u(e)};return(0,s.jsxs)(i.e2,{role:"radiogroup",className:"gap-2",combinedShape:!1,children:[(0,s.jsx)(c,{active:t&&"light"===o,icon:"sun-bright",onClick:()=>d("light"),title:(0,r.si)(e,"switch_to_light_theme")}),(0,s.jsx)(c,{active:t&&"system"===o,icon:"desktop",onClick:()=>d("system"),title:(0,r.si)(e,"switch_to_system_theme")}),(0,s.jsx)(c,{active:t&&"dark"===o,icon:"moon",onClick:()=>d("dark"),title:(0,r.si)(e,"switch_to_dark_theme")})]})}function c(e){let{icon:t,onClick:n,title:a,active:l}=e;return(0,s.jsx)(i.$n,{type:"button",role:"radio",onClick:n,label:a,"aria-checked":l,variant:"blank",size:"default",className:l?"bg-primary theme-muted:bg-primary-hover text-primary-strong ring-primary hover:bg-primary contrast-more:text-primary-strong contrast-more:ring-1 [html.sidebar-filled.theme-bold.tint_&]:bg-primary-hover":"",icon:t,iconOnly:!0})}},36774:(e,t,n)=>{n.d(t,{a:()=>a});var s=n(59282);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,[t,n]=s.useState(!1);return s.useEffect(()=>{let t=window.matchMedia("(max-width: ".concat(e-.02,"px)"));n(t.matches);let s=e=>{n(e.matches)};return t.addEventListener("change",s),()=>{t.removeEventListener("change",s)}},[e]),t}},41784:(e,t,n)=>{n.d(t,{Ac:()=>r,Do:()=>i,VN:()=>l,XO:()=>o,a8:()=>d,bY:()=>u,tP:()=>c});var s=n(54202),a=n(23449);let l=n(59282).forwardRef((e,t)=>{let{children:n,...l}=e;return(0,s.jsx)("div",{...l,className:(0,a.P)("flex h-full grow animate-fade-in-slow flex-col overflow-hidden bg-tint-base text-sm text-tint",l.className),ref:t,children:n})});function r(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex select-none items-center gap-2 border-tint-subtle border-b bg-tint-subtle px-4 py-2 text-tint-strong",children:t})}function i(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex flex-1 flex-col",children:t})}function o(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:t})}function c(e){let{children:t}=e;return(0,s.jsx)("div",{className:"font-bold",children:t})}function u(e){let{children:t,className:n}=e;return(0,s.jsx)("div",{className:(0,a.P)("text-tint text-xs leading-none transition-all duration-500",n),children:t})}function d(e){let{children:t}=e;return(0,s.jsx)("div",{className:"ml-auto flex gap-2",children:t})}},57648:(e,t,n)=>{n.d(t,{S:()=>i});var s=n(54202),a=n(23449),l=n(57246),r=n(59282);function i(e){let{keys:t,className:n}=e,[i,o]=r.useState(null);return r.useEffect(()=>{o(function(){let e=navigator.platform.toLowerCase();return e.includes("mac")?"mac":(e.includes("win"),"win")}())},[]),(0,s.jsx)("div",{"aria-busy":null===i?"true":void 0,className:(0,a.P)('shortcut hidden justify-end gap-0.5 whitespace-nowrap text-tint text-xs [font-feature-settings:"calt","case"] contrast-more:text-tint-strong md:flex',i?"motion-safe:animate-fade-in motion-reduce:opacity-100":"opacity-0"),children:t.map((e,t)=>{let r=e;switch(e){case"mod":r="mac"===i?"⌘":"Ctrl";break;case"enter":r=(0,s.jsx)(l.Icon,{icon:"arrow-turn-down-left",className:"size-[.75em]"})}return(0,s.jsx)("kbd",{className:(0,a.P)("flex h-5 min-w-5 items-center justify-center rounded-md border border-tint-subtle px-1","mod"===e?"mac"===i?"text-sm":"text-xs":"uppercase",n),children:r},t)})})}},63243:(e,t,n)=>{n.d(t,{C8:()=>a.useAIChatController,J4:()=>a.useAIChatState,OD:()=>s.useAI});var s=n(96160),a=n(30481)},64715:(e,t,n)=>{n.r(t),n.d(t,{SearchContainer:()=>K});var s=n(54202),a=n(83372),l=n(64928),r=n(70140),i=n(59282),o=n(97796),c=n(63243),u=n(75265),d=n(70932),m=n(36774),h=n(86181),p=n(57246),f=n(42416),x=n(38103),g=n(23449);let v=(0,i.createContext)(void 0);function b(e){let{children:t,value:n}=e;return(0,s.jsx)(v.Provider,{value:n,children:t})}var y=n(41758);let _=(0,y.createServerReference)("407c2722465441d3c5ec6ff11e7d66ffc90ca97b94",y.callServer,void 0,y.findSourceMapURL,"streamAskQuestion");var k=n(86628);function j(e){let{query:t}=e,n=(0,a.ok)(),l=(0,d.jt)(),[r,o]=function(){let e=(0,i.useContext)(v);if(!e)throw Error("SearchAskContext is not available");return e}();i.useEffect(()=>{let e=!1;return o({type:"loading"}),(async()=>{l({type:"ask_question",query:t});let{stream:n}=await _({question:t});for await(let t of(0,f.S7)(n)){if(e)return;t&&o({type:"answer",answer:t})}})().catch(()=>{e||o({type:"error"})}),()=>{e=!0}},[t,o,l]),i.useEffect(()=>()=>{o(null)},[o]);let c=(0,s.jsx)("div",{className:"flex grow items-center justify-center",children:(0,s.jsx)(h.Rh,{className:(0,g.P)("size-6","text-tint/6")})});return(0,s.jsxs)("div",{className:"flex min-h-full p-4",children:[(null==r?void 0:r.type)==="answer"?(0,s.jsx)(i.Suspense,{fallback:c,children:(0,s.jsx)(w,{answer:r.answer,placeholder:c,query:t})}):null,(null==r?void 0:r.type)==="error"?(0,s.jsx)("div",{className:(0,g.P)("grow p-4 text-center"),children:(0,x.t)(n,"search_ask_error")}):null,(null==r?void 0:r.type)==="loading"?c:null]})}function w(e){let{query:t,answer:n,placeholder:a}=e,[l,r]=i.useState(null),[o,c]=i.useTransition();return i.useEffect(()=>{c(()=>{r(n)})},[n]),l?(0,s.jsx)("div",{className:(0,g.P)("w-full"),children:(0,s.jsx)(C,{query:t,answer:l})}):(0,s.jsx)(s.Fragment,{children:a})}function C(e){var t;let{query:n,answer:l}=e,r=(0,a.ok)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{"data-testid":"search-ask-answer",className:"text-tint-strong",children:[null!=(t=l.body)?t:(0,x.t)(r,"search_ask_no_answer"),l.sources.length>0?(0,s.jsx)(u.ph,{query:n,className:"-ml-1 mt-2",responseId:""}):null,l.followupQuestions.length>0?(0,s.jsx)(N,{followupQuestions:l.followupQuestions}):null]}),l.sources.length>0?(0,s.jsx)(S,{sources:l.sources,language:r,hasAnswer:!!l.body}):null]})}function N(e){let{followupQuestions:t}=e,n=(0,k.useSearchLink)();return(0,s.jsx)("div",{className:(0,g.P)("flex","flex-col","flex-wrap","mt-4"),children:t.map(e=>(0,s.jsxs)(h.N_,{className:(0,g.P)("flex","items-center","gap-2","px-4","-mx-4","py-2","rounded-sm","straight-corners:rounded-none","circular-corners:rounded-full","text-tint","hover:bg-tint-hover","focus-within:bg-tint-hover"),...n({ask:e,open:!0}),children:[(0,s.jsx)(p.Icon,{icon:"magnifying-glass",className:(0,g.P)("size-4","shrink-0","mr-2","text-tint-subtle")}),(0,s.jsx)("span",{children:e})]},e))})}function S(e){let{sources:t,language:n,hasAnswer:a}=e;return(0,s.jsxs)("div",{className:(0,g.P)("flex","flex-wrap","gap-2","mt-4","sm:mt-6","pt-4","border-t","border-subtle"),children:[(0,s.jsx)("span",{children:(0,x.t)(n,a?"search_ask_sources":"search_ask_sources_no_answer")}),t.map(e=>(0,s.jsx)("span",{className:(0,g.P)(),children:(0,s.jsxs)(h.N_,{className:(0,g.P)("flex","flex-wrap","gap-1","items-center","text-tint","hover:underline","links-accent:decoration-[3px]","links-accent:underline-offset-4","focus-within:text-primary"),href:e.href,children:[(0,s.jsx)(p.Icon,{icon:"arrow-up-right",className:(0,g.P)("text-tint-subtle","size-4","shrink-0")}),e.title]})},e.id))]})}var I=n(81853),q=n(85372);function L(e){var t;let{query:n,text:a,highlight:l=["-z-1","relative","text-bold","bg-primary","text-contrast-primary","px-0.5","-mx-0.5","py-0.5","rounded-sm","straight-corners:rounded-xs","transition-colors","group-hover:bg-primary-active","group-hover:text-contrast-primary-active","group-[.is-active]:bg-primary-active","group-[.is-active]:text-contrast-primary-active"]}=e,r=(t=a,n.toLowerCase().split(" ").reduce((e,t)=>{var n,s;return n=e,s=t,n.reduce((e,t)=>{if(t.match)return e.push(t),e;let{text:n}=t,a=n.toLowerCase().indexOf(s);if(a>=0){let t=n.slice(0,a),l=n.slice(a,a+s.length),r=n.slice(a+s.length);return t.length>0&&e.push({text:t}),l.length>0&&e.push({text:l,match:s}),r.length>0&&e.push({text:r}),e}return e.push({text:n}),e},[])},[{text:t}]));return(0,s.jsx)("span",{className:(0,g.P)("relative z-2 whitespace-break-spaces"),children:r.map((e,t)=>(0,s.jsx)("span",{className:(0,g.P)(e.match?l:null),children:e.text},t))})}var P=n(86761);let z=i.forwardRef(function(e,t){let{children:n,href:a,active:l,className:r,leadingIcon:i,size:o="medium",action:c,...u}=e;return(0,s.jsxs)(P.Link,{ref:t,href:a,className:(0,g.P)("flex","items-center","gap-3","group","px-4","small"===o?"py-1.5":"py-3","text-tint","hover:bg-tint","hover:text-tint-strong","group","transition-colors","rounded-corners:rounded-md","circular-corners:rounded-2xl",l?["is-active","bg-primary","text-primary-strong","hover:bg-primary"]:null,r),role:"option",...u,children:[(0,s.jsx)("div",{className:"size-4 shrink-0 text-tint-subtle",children:"string"==typeof i?(0,s.jsx)(p.Icon,{icon:i,className:"size-4"}):i}),(0,s.jsx)("div",{className:"grow",children:n}),l?(0,s.jsx)(h.$n,{label:c,iconOnly:!0,variant:"primary",icon:"arrow-turn-down-left"}):(0,s.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center text-tint-subtle",children:(0,s.jsx)(p.Icon,{icon:"chevron-right",className:"size-3"})})]})}),A=i.forwardRef(function(e,t){var n,l;let{query:r,item:o,active:c,...u}=e,d=(0,a.ok)(),m=null!=(l=null==(n=o.breadcrumbs)?void 0:n.map(e=>(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[e.icon?(0,s.jsx)(p.Icon,{className:"size-3",icon:e.icon}):null,e.label]},e.label)))?l:[];return(0,s.jsxs)(z,{ref:t,href:o.href,active:c,"data-testid":"search-page-result",action:(0,a.si)(d,"view"),leadingIcon:(0,s.jsx)(p.Icon,{icon:"memo",className:"size-4"}),insights:{type:"search_open_result",query:r,result:{pageId:o.pageId,spaceId:o.spaceId}},"aria-label":(0,a.si)(d,"search_page_result_title",o.title),...u,children:[m.length>0?(0,s.jsx)("div",{className:(0,g.P)("text-xs","text-tint/7","contrast-more:text-tint","group-[.is-active]:text-tint","transition-colors","font-normal","uppercase","leading-none","tracking-wider","mb-1","flex","flex-wrap","gap-x-2","gap-y-1","items-center"),children:(m.length>3?[...m.slice(0,2),(0,s.jsx)(p.Icon,{icon:"ellipsis-h",className:"size-3"},"ellipsis"),...m.slice(-1)]:m).map((e,t)=>(0,s.jsxs)(i.Fragment,{children:[0!==t?(0,s.jsx)(p.Icon,{icon:"chevron-right",className:"size-2"},"".concat(e.key,"-icon")):null,(0,s.jsx)("span",{className:"line-clamp-1",children:e})]},t))}):null,(0,s.jsx)("p",{className:"line-clamp-2 font-semibold text-base text-tint-strong leading-snug",children:(0,s.jsx)(L,{query:r,text:o.title})})]})}),E=i.forwardRef(function(e,t){let{question:n,recommended:l=!1,active:r,assistant:i,...o}=e,c=(0,a.ok)(),u=(0,k.useSearchLink)();return(0,s.jsx)(z,{size:l?"small":"medium",action:(0,a.si)(c,"ask",""),ref:t,"data-testid":l?"search-recommended-question":"search-ask-question",scroll:!1,...u({ask:n,query:null,open:"search"===i.mode},()=>{i.open(n)}),active:r,leadingIcon:l?"search":i.icon,className:l?"pr-1.5":"",...o,children:l?n:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-semibold text-base text-tint-strong leading-tight",children:(0,a.t)(c,"search_ask",[n])}),(0,s.jsx)("div",{className:"text-sm text-tint-subtle",children:(0,a.t)(c,"search_ask_description",i.label)})]})})}),R=i.forwardRef(function(e,t){let{query:n,item:l,active:r,...i}=e,o=(0,a.ok)();return(0,s.jsx)(z,{ref:t,href:l.href,size:"small",active:r,action:(0,a.si)(o,"view"),"data-testid":"search-page-section-result",insights:{type:"search_open_result",query:n,result:{pageId:l.pageId,spaceId:l.spaceId}},"aria-label":l.title?(0,a.si)(o,"search_section_result_title",l.title):l.body?(0,a.si)(o,"search_section_result_content",function(e,t){let n=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return n<20?e.slice(0,100):"…".concat(e.slice(n-10,n+t.length+30),"…")}(l.body,n)):(0,a.si)(o,"search_section_result_default"),...i,children:(0,s.jsxs)("div",{className:"grow border-tint-subtle border-l-2 pl-4",children:[l.title?(0,s.jsx)("p",{className:"font-semibold",children:(0,s.jsx)(L,{query:n,text:l.title})}):null,l.body?function(e,t){let n=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return(0,s.jsx)("p",{className:"wrap-anywhere relative line-clamp-3 text-sm",children:(0,s.jsx)(L,{query:t,text:n<20?e:"…".concat(e.slice(n-10))})})}(l.body,n):null]})})}),M=i.forwardRef(function(e,t){let{children:n,id:l,query:r,results:o,fetching:u,cursor:d,error:m}=e,p=(0,a.ok)(),f=i.useRef([]);i.useEffect(()=>{var e;null!==d&&f.current[d]&&(null==(e=f.current[d])||e.scrollIntoView({block:"nearest",inline:"nearest"}))},[d]);let x=i.useCallback(()=>{var e;null!==d&&f.current[d]&&(null==(e=f.current[d])||e.click())},[d]);i.useImperativeHandle(t,()=>({select:x}),[x]);let{assistants:v}=(0,c.OD)();if(u)return(0,s.jsx)("div",{className:(0,g.P)("flex","items-center","justify-center","py-8","h-full"),children:(0,s.jsx)(h.Rh,{className:(0,g.P)("w-6","text-tint/6")})});if(m)return(0,s.jsxs)("div",{className:(0,g.P)("flex","flex-col","items-center","justify-center","text-center","py-8","h-full","gap-4"),children:[(0,s.jsx)("div",{children:(0,a.t)(p,"search_ask_error")}),(0,s.jsx)(h.$n,{variant:"secondary",size:"small",onClick:()=>window.location.reload(),children:(0,a.t)(p,"unexpected_error_retry")})]});let b=(0,s.jsx)("div",{className:(0,g.P)("flex","items-center","justify-center","text-center","py-8","h-full"),children:(0,a.t)(p,"search_no_results_for",r)});return(0,s.jsxs)("div",{className:(0,g.P)("min-h-full"),children:[n,0===o.length?r?b:(0,s.jsx)("div",{className:"empty"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{"data-testid":"search-results",className:"flex flex-col gap-y-1",id:l,role:"listbox","aria-live":"polite",children:o.map((e,t)=>{let n={"aria-posinset":t+1,"aria-setsize":o.length,id:"".concat(l,"-").concat(t)};switch(e.type){case"page":return(0,s.jsx)(A,{ref:e=>{f.current[t]=e},query:r,item:e,active:t===d,...n},e.id);case"question":return(0,s.jsx)(E,{ref:e=>{f.current[t]=e},question:r,active:t===d,assistant:e.assistant,...n},e.id);case"recommended-question":return(0,s.jsx)(E,{ref:e=>{f.current[t]=e},question:e.question,active:t===d,assistant:v[0],recommended:!0,...n},e.id);case"section":return(0,s.jsx)(R,{ref:e=>{f.current[t]=e},query:r,item:e,active:t===d,...n},e.id);default:(0,q.default)(e)}})}),!o.some(e=>"question"!==e.type)&&b]})]})});var D=n(50269);function T(e){let{children:t,className:n}=e;return(0,s.jsx)("div",{role:"toolbar","aria-orientation":"horizontal",className:(0,g.P)("flex flex-wrap gap-1 circular-corners:rounded-3xl rounded-corners:rounded-lg bg-tint p-1",n),children:t})}function O(e){let{size:t="medium",className:n,...a}=e;return(0,s.jsx)(D.Button,{variant:"blank",size:t,className:(0,g.P)("shrink grow justify-center whitespace-normal not-contrast-more:data-[active=true]:bg-tint-base",n),...a})}function U(e){let{spaceTitle:t,section:n,withVariants:l,withSections:r,withSiteVariants:i}=e,[o,c]=(0,k.useSearch)(),u=(0,a.ok)();if(!o)return null;let d=["extended","all"].includes(o.scope);return(0,s.jsx)(s.Fragment,{children:r?(0,s.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,s.jsxs)(T,{className:"grow animate-scale-in",children:[(0,s.jsx)(O,{active:["default","all"].includes(o.scope),label:(0,a.si)(u,"search_scope_all"),icon:"infinity",onClick:()=>c({...o,scope:d?"all":"default"})}),(0,s.jsx)(O,{active:["current","extended"].includes(o.scope),icon:null==n?void 0:n.icon,label:(0,a.si)(u,"search_scope_current",null==n?void 0:n.title),onClick:()=>c({...o,scope:d?"extended":"current"})})]}),i?(0,s.jsx)(h.rI,{button:(0,s.jsx)(h.$n,{icon:"ellipsis",iconOnly:!0,size:"default",variant:"blank",label:(0,a.si)(u,"more"),className:"shrink-0",active:d}),children:(0,s.jsx)(h._2,{onClick:()=>c({...o,scope:(()=>{switch(o.scope){case"extended":return"current";case"current":return"extended";case"all":return"default";default:return"all"}})()}),active:d,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.Sc,{checked:d}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:["Include all variants",(0,s.jsx)("div",{className:"text-tint-subtle text-xs",children:"Search content in every language/version"})]})]})})}):null]}):l?(0,s.jsxs)(T,{className:"mb-2 animate-scale-in",children:[(0,s.jsx)(O,{size:r?"small":"medium",active:!d,className:"py-1",label:(0,a.si)(u,"search_scope_current",t),onClick:()=>c({...o,scope:"default"})}),(0,s.jsx)(O,{size:r?"small":"medium",active:d,className:"py-1",icon:"infinity",label:(0,a.si)(u,"search_scope_all"),onClick:()=>c({...o,scope:"all"})})]}):null})}var F=n(34274);let B=(0,y.createServerReference)("406ad96d992358274122b55d13315317125c843af8",y.callServer,void 0,y.findSourceMapURL,"streamRecommendedQuestions"),$=(0,y.createServerReference)("4070a2c736f1862ade067c63f0b28c086a7c525c8d",y.callServer,void 0,y.findSourceMapURL,"searchAllSiteContent"),V=(0,y.createServerReference)("603b2264affcf9af6be5e746cad3e2a6b3def91a63",y.callServer,void 0,y.findSourceMapURL,"searchCurrentSiteSpaceContent"),W=(0,y.createServerReference)("60e79b791e4f09512e91ace6e35b3e921b51f9f831",y.callServer,void 0,y.findSourceMapURL,"searchSpecificSiteSpaceContent"),Q=new Map;function K(e){var t,n,a,p,x,g,v,y,_,w;let{siteSpaceId:C,spaceTitle:N,section:S,withVariants:q,withSiteVariants:L,withSections:P,style:z,className:A,viewport:E,siteSpaceIds:R}=e,{assistants:D}=(0,c.OD)(),[T,O]=(0,k.useSearch)(),K=function(){let[e,t]=(0,i.useState)(null);return(0,i.useMemo)(()=>[e,t],[e])}(),J=(0,r.useRouter)(),Y=(0,d.jt)(),Z=(0,i.useRef)(null),X=(0,i.useRef)(null),G=(0,m.a)(),ee=D.length>0,et=D.filter(e=>"search"===e.mode).length>0,en=i.useRef((null==T?void 0:T.ask)===void 0||(null==T?void 0:T.ask)===null);i.useEffect(()=>{var e,t;en.current||0===D.length||(null==T?void 0:T.ask)!==void 0&&(null==T?void 0:T.ask)!==null&&(en.current=!0,null==(e=D[0])||e.open(null!=(t=null==T?void 0:T.ask)?t:void 0))},[null==T?void 0:T.ask,D.length,null==(t=D[0])?void 0:t.open]);let es=i.useCallback(async e=>{O(e=>e?{...e,open:!1,query:""===e.query?null:e.query}:null),e&&J.push(e)},[O,J]);(0,o.vC)("mod+k",e=>{e.preventDefault(),ea()},{enableOnFormTags:!0}),(0,o.vC)("mod+i",e=>{if(e.preventDefault(),D){var t;null==(t=D[0])||t.open()}},{enableOnFormTags:!0});let ea=i.useCallback(()=>{null!=T&&T.open||(O(e=>{var t,n,s,a;return{ask:ee&&null!=(t=null==e?void 0:e.ask)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",query:null!=(a=null!=(s=null==e?void 0:e.query)?s:et||!ee?null==e?void 0:e.ask:null)?a:"",open:!0}}),Y({type:"search_open"}))},[null==T?void 0:T.open,O,Y,ee,et]);i.useEffect(()=>{let e=e=>{"Escape"===e.key&&es()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[es]);let el=null!=(p=null==T||null==(n=T.query)?void 0:n.trim())?p:"",er=null!=(x=null==T||null==(a=T.ask)?void 0:a.trim())?x:"",ei=et&&er,eo="search-results-".concat(i.useId()),{results:ec,fetching:eu,error:ed}=function(e){let{disabled:t,query:n,siteSpaceId:s,siteSpaceIds:a,scope:l}=e,r=(0,d.jt)(),[o,u]=i.useState({results:[],fetching:!1,error:!1}),{assistants:m}=(0,c.OD)(),h=m.length>0;i.useEffect(()=>{if(t)return;if(!n){if(!h)return void u({results:[],fetching:!1,error:!1});if(Q.has(s)){let e=Q.get(s);(0,F.assert)(e,"Cached recommended questions should be set for site-space ".concat(s)),u({results:e,fetching:!1,error:!1});return}u({results:[],fetching:!1,error:!1});let e=!1,t=new Set,n=[],a=setTimeout(async()=>{if(e)return;let a=await B({siteSpaceId:s});for await(let l of(0,f.S7)(a.stream)){if(!l)continue;let{question:a}=l;!t.has(a)&&(t.add(a),n.push({type:"recommended-question",id:a,question:a}),Q.set(s,n),e||u({results:[...n],fetching:!1,error:!1}))}},100);return()=>{e=!0,clearTimeout(a)}}u(e=>({results:e.results,fetching:!0,error:!1}));let e=!1,i=setTimeout(async()=>{try{let t=await (()=>{if("all"===l)return $(n);if("default"===l)return V(n,s);if("extended"===l)return W(n,a);if("current"===l)return W(n,[s]);throw Error("Unhandled search scope: ".concat(l))})();if(e)return;if(!t)return void u({results:[],fetching:!1,error:!0});u({results:t,fetching:!1,error:!1}),r({type:"search_type_query",query:n})}catch(t){if(e)return;u({results:[],fetching:!1,error:!0})}},350);return()=>{e=!0,clearTimeout(i)}},[n,l,r,h,s,a,t]);let p=i.useMemo(()=>h?function(e,t,n){let s=e.filter(e=>"question"!==e.type);return 0===t.length?s:[...n.map((e,n)=>({type:"question",id:"question-".concat(n),query:t,assistant:e})),...null!=s?s:[]]}(o.results,n,m):o.results,[o.results,n,h]);return{...o,results:p}}({disabled:!((null==T?void 0:T.query)||ee),query:el,siteSpaceId:C,siteSpaceIds:R,scope:null!=(g=null==T?void 0:T.scope)?g:"default",withAI:ee}),em=null!=(y=null!=(v=null==T?void 0:T.query)?v:et||!ee?null==T?void 0:T.ask:null)?y:"",{cursor:eh,moveBy:ep}=function(e){let[t,n]=i.useState(null),{query:s,results:a}=e;i.useEffect(()=>{s||n(null)},[s]),i.useEffect(()=>{a.length>0&&n(0)},[a]);let l=i.useCallback(e=>{n(t=>null===t?0:Math.max(Math.min(t+e,a.length-1),0))},[a]);return{cursor:t,setCursor:n,moveBy:l}}({query:el,results:ec});return(0,s.jsxs)(b,{value:K,children:[(0,s.jsx)(h.AM,{content:(null==T?void 0:T.query)||ee?(0,s.jsxs)(i.Suspense,{fallback:null,children:[(q||P)&&!ei?(0,s.jsx)(U,{section:S,spaceTitle:N,withVariants:q,withSiteVariants:L,withSections:P}):null,null===T||ei?null:(0,s.jsx)(M,{ref:Z,query:el,id:eo,fetching:eu,results:ec,cursor:eh,error:ed}),ei?(0,s.jsx)(j,{query:er}):null]}):null,rootProps:{open:!!(("desktop"===E?!G:"mobile"!==E||G)&&null!=(_=null==T?void 0:T.open)&&_),modal:!1},contentProps:{onOpenAutoFocus:e=>e.preventDefault(),align:"start",className:"@container overflow-y-scroll bg-tint-base has-[.empty]:hidden scroll-py-2 w-128 p-2 max-h-[min(32rem,var(--radix-popover-content-available-height))] max-w-[min(var(--radix-popover-content-available-width),32rem)]",onInteractOutside:e=>{var t;if(null==(t=X.current)?void 0:t.contains(e.target))return void e.preventDefault();es()},sideOffset:8,collisionPadding:{top:16,right:16,bottom:32,left:16},hideWhenDetached:!0},triggerProps:{asChild:!0},children:(0,s.jsx)(I.SearchInput,{ref:X,value:em,onFocus:ea,onChange:e=>{O(t=>{var n,s;return{ask:ee&&!et&&null!=(n=null==t?void 0:t.ask)?n:null,query:e,scope:null!=(s=null==t?void 0:t.scope)?s:"default",open:!0}})},onKeyDown:e=>{if("ArrowUp"===e.key)e.preventDefault(),ep(-1);else if("ArrowDown"===e.key)e.preventDefault(),ep(1);else if("Enter"===e.key){var t;e.preventDefault(),null==(t=Z.current)||t.select()}},withAI:et,isOpen:null!=(w=null==T?void 0:T.open)&&w,className:A,"aria-controls":eo,"aria-activedescendant":null!==eh?"".concat(eo,"-").concat(eh):void 0,children:(0,s.jsx)(H,{count:ec.length,showing:!!em&&!eu})})}),D.filter(e=>!0===e.ui).map((e,t)=>(0,s.jsx)(u.LN,{assistant:e,withShortcut:0===t,showLabel:1===D.filter(e=>!0===e.ui).length&&z===l.zK.Prominent},e.id))]})}function H(e){let{count:t,showing:n}=e,l=(0,a.ok)();return(0,s.jsx)("div",{className:"sr-only","aria-live":"assertive",role:"alert","aria-relevant":"all",children:n?t>0?(0,a.t)(l,"search_results_count",t):(0,a.t)(l,"search_no_results"):""})}},68039:(e,t,n)=>{n.r(t),n.d(t,{AIChatButton:()=>o});var s=n(54202),a=n(83372),l=n(38103),r=n(86181),i=n(57648);function o(e){let{assistant:t,showLabel:n=!0,withShortcut:o=!0}=e,c=(0,a.ok)();return(0,s.jsx)(r.$n,{icon:t.icon,"data-testid":"ai-chat-button",iconOnly:!n,size:"medium",variant:"header",className:"h-9 px-2.5 max-md:[&_.button-content]:hidden",label:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.t)(c,"ai_chat_ask",t.label),o?(0,s.jsx)(i.S,{keys:["mod","i"],className:"border-tint-11 text-tint-1"}):null]}),onClick:()=>t.open(),children:n?(0,l.t)(c,"ask"):null})}},69332:(e,t,n)=>{n.r(t),n.d(t,{AIChat:()=>S,AIChatBody:()=>L,AIChatDynamicIcon:()=>I,AIChatSubtitle:()=>q,getAIChatName:()=>z});var s=n(54202),a=n(83372),l=n(57246),r=n(59282),i=n(97796),o=n(63243),c=n(41784),u=n(70932),d=n(10330),m=n(86181),h=n(24066),p=n(72952),f=n(23449),x=n(57648);function g(e){let{value:t,onChange:n,onSubmit:o,disabled:c,loading:u}=e,d=(0,a.ok)(),h=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!c&&!u){let e=setTimeout(()=>{var e;null==(e=h.current)||e.focus()},150);return()=>clearTimeout(e)}},[c,u]),(0,i.vC)("mod+i",e=>{var t;e.preventDefault(),null==(t=h.current)||t.focus()},{enableOnFormTags:!0}),(0,s.jsxs)("div",{className:"depth-subtle:has-[textarea:focus]:-translate-y-px relative flex flex-col overflow-hidden circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint-base/9 depth-subtle:shadow-sm shadow-tint/6 ring-1 ring-tint-subtle backdrop-blur-lg transition-all depth-subtle:has-[textarea:focus]:shadow-lg has-[textarea:focus]:shadow-primary-subtle has-[textarea:focus]:ring-2 has-[textarea:focus]:ring-primary-hover contrast-more:bg-tint-base dark:shadow-tint-1",children:[(0,s.jsx)("textarea",{ref:h,disabled:c||u,"data-loading":u,"data-testid":"ai-chat-input",className:(0,f.P)("resize-none","focus:outline-hidden","focus:ring-0","w-full","px-3","py-3","pb-12","h-auto","bg-transparent","peer","max-h-64","placeholder:text-tint/8","transition-colors","disabled:bg-tint-subtle","delay-300","disabled:delay-0","disabled:cursor-not-allowed","data-[loading=true]:cursor-progress","data-[loading=true]:opacity-50"),value:t,rows:1,placeholder:(0,a.si)(d,"ai_chat_input_placeholder"),onChange:e=>{let t=e.currentTarget;n(t.value),t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")},onKeyDown:e=>{if("Escape"===e.key){e.preventDefault(),e.currentTarget.blur();return}"Enter"===e.key&&!e.shiftKey&&t.trim()&&(e.preventDefault(),e.currentTarget.style.height="auto",o(t))}}),c?null:(0,s.jsx)("div",{className:"absolute top-2.5 right-3 animate-[fadeIn_0.2s_0.5s_ease-in-out_both] peer-focus:hidden",children:(0,s.jsx)(x.S,{keys:["mod","i"],className:"bg-tint-base"})}),(0,s.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex items-center gap-2 px-2 py-2",children:[(0,s.jsxs)(m.z8,{children:[(0,s.jsx)(m.jc,{className:"max-w-xs bg-tint p-2 text-sm text-tint",arrow:{className:"fill-tint-3"},children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 p-2",children:[(0,s.jsx)("p",{className:"font-semibold",children:(0,a.t)(d,"ai_chat_context_description")}),(0,s.jsxs)("ul",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Icon,{icon:"memo",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_pages_youve_read")]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Icon,{icon:"user",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_info_provided_by_the_site")]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Icon,{icon:"message-question",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_previous_messages")]})]}),(0,s.jsx)("p",{children:(0,a.t)(d,"ai_chat_context_disclaimer")})]})}),(0,s.jsx)(m.d0,{children:(0,s.jsxs)("div",{className:"flex cursor-help items-center gap-1 circular-corners:rounded-2xl rounded-corners:rounded-md px-2.5 py-1.5 text-tint/7 text-xs transition-all hover:bg-tint",children:[(0,s.jsx)("span",{className:"-ml-1 circular-corners:rounded-2xl rounded-corners:rounded-sm bg-tint-11/7 px-1 py-0.5 font-mono font-semibold text-[0.65rem] text-contrast-tint-11 leading-none",children:(0,a.t)(d,"ai_chat_context_badge")})," ",(0,s.jsx)("span",{className:"leading-none",children:(0,a.t)(d,"ai_chat_context_title")}),(0,s.jsx)(l.Icon,{icon:"question-circle",className:"size-3 shrink-0"})]})})]}),(0,s.jsx)(m.$n,{label:(0,a.si)(d,"send"),size:"medium",className:"ml-auto",disabled:c||!t.trim(),onClick:()=>o(t)})]})]})}var v=n(38103),b=n(64928);function y(e){let{chat:t}=e,n=(0,a.ok)();return(0,i.vC)("mod+enter",e=>{var n;e.preventDefault(),null==(n=t.pendingTools[0])||n.confirm()},{enableOnFormTags:!0},[t.pendingTools]),(0,s.jsx)("div",{className:"flex w-full flex-wrap justify-end gap-2",children:t.pendingTools.map((e,t)=>(0,s.jsxs)("div",{className:"flex w-full animate-present-slow flex-col gap-1",style:{animationDelay:"".concat(.5+.1*t,"s")},children:[(0,s.jsx)(m.$n,{onClick:()=>{e.confirm()},tabIndex:t,label:e.label,className:"w-full justify-center",size:0===t?"default":"medium",variant:0===t?"primary":"secondary",icon:e.icon}),0===t&&(0,s.jsx)("div",{className:"flex pointer-none:hidden w-full animate-fade-in-slow items-center justify-end gap-2 text-tint text-xs",style:{animationDelay:"1000ms"},children:(0,v.t)(n,"press_to_confirm",(0,s.jsx)(x.S,{keys:["mod","enter"],className:"mx-0 text-tint"}))})]},t))})}var _=n(13885);function k(e){let{chat:t,chatController:n}=e;return 0===t.followUpSuggestions.length?null:(0,s.jsx)("div",{className:"mt-auto flex w-full flex-wrap justify-end gap-2",children:t.followUpSuggestions.map((e,t)=>(0,s.jsx)(m.$n,{onClick:()=>{n.postMessage({message:e})},label:e,className:"whitespace-normal! max-w-full animate-[present_500ms_both] text-left ring-1 ring-tint-subtle",size:"medium",variant:"blank",style:{animationDelay:"".concat(250+Math.min(50*t,150),"ms")}},t))})}function j(e){let{chat:t,chatController:n,lastUserMessageRef:a}=e;return(0,s.jsx)(s.Fragment,{children:t.messages.map((e,l)=>{let r=l===t.messages.length-1,i=e.role===b.W7.User&&l===t.messages.map(e=>e.role).lastIndexOf(b.W7.User);return(0,s.jsxs)("div",{ref:i?a:void 0,"data-testid":"ai-chat-message",className:(0,f.P)(e.content?"animate-fade-in-slow":"","shrink-0","last:min-h-[calc(100%-5rem)]","scroll-mt-36","lg:scroll-mt-0","flex flex-col gap-6","break-words","group/message",e.role===b.W7.User?"max-w-[80%] self-end circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint px-4 py-2":"text-tint-strong"),style:{animationDelay:"".concat(Math.min(.05*l,.5),"s")},children:[e.content?e.content:null,r&&t.loading?(0,s.jsxs)("div",{className:"flex w-full animate-fade-in-slow flex-col gap-2",children:[e.content?null:(0,s.jsx)(w,{}),(0,s.jsx)(C,{})]}):null,r?(0,s.jsxs)(s.Fragment,{children:[!t.loading&&!t.error&&t.query&&t.responseId&&0===t.pendingTools.length?(0,s.jsx)(_.AIResponseFeedback,{responseId:t.responseId,query:t.query,className:"-ml-1 -mt-4"}):null,(0,s.jsx)(y,{chat:t}),(0,s.jsx)(k,{chat:t,chatController:n})]}):null]},l)})})}function w(){let e=(0,a.ok)();return(0,s.jsxs)("div",{className:"animate-[heightIn_500ms_4500ms_ease_both] py-2 text-tint-subtle",children:[(0,v.s)(e,"ai_chat_hold_message_1").split(" ").map((e,t)=>(0,s.jsxs)("span",{className:"animate-fade-in-slow",style:{animationDelay:"".concat(5e3+200*t,"ms")},children:[e," "]},t)),(0,v.s)(e,"ai_chat_hold_message_2").split(" ").map((e,t)=>(0,s.jsxs)("span",{className:"animate-fade-in-slow",style:{animationDelay:"".concat(1e4+200*t,"ms")},children:[e," "]},t))]})}function C(){return(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:7}).map((e,t)=>(0,s.jsx)("div",{className:"h-4 animate-[fadeIn_500ms_ease_both,pulse_1.5s_infinite] circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint-4",style:{width:"calc(".concat(t%4*20+10,"% - 4px)"),animationDelay:"".concat(.1*t,"s")}},t))})}function N(e){let t=(0,a.ok)(),{chatController:n,suggestions:l=[(0,a.si)(t,"ai_chat_suggested_questions_about_this_page"),(0,a.si)(t,"ai_chat_suggested_questions_read_next"),(0,a.si)(t,"ai_chat_suggested_questions_example")]}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center gap-2",children:l.map((e,t)=>(0,s.jsx)(m.$n,{variant:"secondary",size:"medium",className:"max-w-full animate-[present_500ms_both] whitespace-normal",style:{animationDelay:"".concat(800+100*t,"ms")},onClick:()=>n.postMessage({message:e}),children:e},e))})}function S(e){let{trademark:t}=e,n=(0,a.ok)(),l=(0,o.J4)(),d=(0,o.C8)(),p=r.useRef(null);r.useEffect(()=>{if(l.opened){var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth",block:"start"})}},[l.opened]),(0,i.vC)("esc",()=>{d.close()},[]);let f=(0,u.jt)();return(r.useEffect(()=>{l.opened&&f({type:"ask_view"})},[l.opened,f]),l.opened)?(0,s.jsx)("div",{"data-testid":"ai-chat",className:"ai-chat inset-y-0 right-0 z-40 mx-auto flex max-w-3xl animate-present scroll-mt-36 px-4 py-4 transition-all duration-300 sm:px-6 lg:fixed lg:w-80 lg:animate-enter-from-right lg:pr-4 lg:pl-0 xl:w-96",children:(0,s.jsxs)(c.VN,{className:"relative circular-corners:rounded-3xl rounded-corners:rounded-md depth-subtle:shadow-lg shadow-tint ring-1 ring-tint-subtle",children:[(0,s.jsxs)(c.Ac,{children:[(0,s.jsx)(I,{trademark:t}),(0,s.jsxs)(c.Do,{children:[(0,s.jsx)(c.tP,{children:z(n,t)}),(0,s.jsx)(q,{chat:l})]}),(0,s.jsxs)(c.a8,{children:[(0,s.jsx)(h.AIChatControlButton,{}),(0,s.jsx)(m.$n,{onClick:()=>d.close(),iconOnly:!0,icon:"close",label:(0,a.si)(n,"close"),variant:"blank",size:"default"})]})]}),(0,s.jsx)(c.XO,{children:(0,s.jsx)(L,{chatController:d,chat:l,trademark:t})})]})}):null}function I(e){var t;let{trademark:n}=e,a=(0,o.J4)();return(0,s.jsx)(p.y,{className:"size-5 text-tint",trademark:n,state:a.error?"error":a.loading?(null==(t=a.messages[a.messages.length-1])?void 0:t.content)?"working":"thinking":a.messages.length>0?a.pendingTools.length>0?"confirm":"done":"default"})}function q(e){var t;let{chat:n}=e,l=(0,a.ok)();return(0,s.jsx)(c.bY,{className:n.loading?"h-3 opacity-11":"h-0 opacity-0",children:(null==(t=n.messages[n.messages.length-1])?void 0:t.content)?(0,a.si)(l,"ai_chat_working"):(0,a.si)(l,"ai_chat_thinking")})}function L(e){let{chatController:t,chat:n,trademark:l,suggestions:i}=e,[o,c]=r.useState(""),u=r.useRef(null),m=r.useRef(null),h=r.useRef(null),[f,x]=r.useState(0),v=(0,a.ok)(),b=(0,d.cB)(36e5),y=!n.messages.length,_=r.useMemo(()=>{let e=new Date(b).getHours();return e<6?(0,a.si)(v,"ai_chat_assistant_greeting_night"):e<12?(0,a.si)(v,"ai_chat_assistant_greeting_morning"):e<18?(0,a.si)(v,"ai_chat_assistant_greeting_afternoon"):(0,a.si)(v,"ai_chat_assistant_greeting_evening")},[b,v]);return r.useEffect(()=>{n.messages.length>0&&m.current&&m.current.scrollIntoView({behavior:"smooth",block:"start"})},[n.messages.length]),r.useEffect(()=>{let e=setTimeout(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth",block:"start"})},100),t=new ResizeObserver(e=>{e.forEach(e=>{x(e.contentRect.height+32)})});return h.current&&t.observe(h.current),()=>{t.disconnect(),clearTimeout(e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:u,className:"gutter-stable flex grow scroll-pt-4 flex-col gap-4 overflow-y-auto p-4",style:{paddingBottom:"".concat(f,"px")},children:y?(0,s.jsxs)("div",{className:"flex min-h-full w-full shrink-0 flex-col items-center justify-center gap-6 py-4",children:[(0,s.jsx)("div",{className:"flex size-32 animate-fade-in-slow items-center justify-center rounded-full bg-tint-subtle",children:(0,s.jsx)(p.y,{state:"intro",trademark:l,className:"size-16 animate-[present_500ms_200ms_both]"})}),(0,s.jsxs)("div",{className:"animate-[fadeIn_500ms_400ms_both]",children:[(0,s.jsx)("h5",{className:" text-center font-bold text-lg text-tint-strong",children:_}),(0,s.jsx)("p",{className:"text-center text-tint",children:(0,a.t)(v,"ai_chat_assistant_description")})]}),n.error?null:(0,s.jsx)(N,{chatController:t,suggestions:i})]}):(0,s.jsx)(j,{chat:n,chatController:t,lastUserMessageRef:m})}),(0,s.jsxs)("div",{ref:h,className:"absolute inset-x-0 bottom-0 mr-2 flex select-none flex-col gap-4 bg-linear-to-b from-transparent to-50% to-tint-base/9 p-4 pr-2",children:[n.error?(0,s.jsx)(P,{chatController:t}):null,(0,s.jsx)(g,{value:o,onChange:c,loading:n.loading,disabled:n.loading||n.error,onSubmit:()=>{t.postMessage({message:o}),c("")}})]})]})}function P(e){let t=(0,a.ok)(),{chatController:n}=e;return(0,s.jsxs)("div",{className:"flex animate-scale-in flex-wrap justify-between gap-2 circular-corners:rounded-2xl rounded-corners:rounded-md bg-danger px-3 py-2 text-danger text-sm ring-1 ring-danger",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Icon,{icon:"exclamation-triangle",className:"size-3.5"}),(0,s.jsx)("span",{className:"flex items-center gap-1",children:(0,a.t)(t,"ai_chat_error")})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(m.$n,{variant:"blank",size:"small",icon:"refresh",label:(0,a.si)(t,"unexpected_error_retry"),onClick:()=>{n.clear()},className:"text-danger! hover:bg-danger-5"})})]})}function z(e,t){return t?(0,a.si)(e,"ai_chat_assistant_name"):(0,a.si)(e,"ai_chat_assistant_name_unbranded")}},72952:(e,t,n)=>{n.d(t,{y:()=>r});var s=n(54202),a=n(23449),l=n(57246);let r=e=>{let{className:t="size-4",size:n,trademark:r=!0,state:i="default",...o}=e;return r?(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",preserveAspectRatio:"xMaxYMid meet",className:t,"aria-busy":"thinking"===i,overflow:"visible",...o,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:"GitBook Assistant"}),(0,s.jsx)("path",{d:"M12.8916 1.06265C12.921 0.979101 13.0392 0.979127 13.0685 1.06267C13.239 1.5478 13.3439 1.84646 13.516 2.1032C13.6683 2.33042 13.8578 2.53033 14.0766 2.6945C14.3239 2.88 14.6165 3.00068 15.0919 3.19671C15.1761 3.23142 15.1761 3.3506 15.0919 3.38531C14.6165 3.58134 14.3239 3.70203 14.0766 3.88752C13.8578 4.05169 13.6683 4.2516 13.516 4.47882C13.3439 4.73556 13.239 5.03423 13.0685 5.51937C13.0392 5.60291 12.921 5.60292 12.8916 5.51938C12.7212 5.03423 12.6162 4.73557 12.4442 4.47882C12.2919 4.2516 12.1023 4.05169 11.8835 3.88752C11.6363 3.70202 11.3436 3.58134 10.8682 3.38531C10.7841 3.3506 10.7841 3.23141 10.8683 3.1967C11.3436 3.00067 11.6363 2.87999 11.8835 2.6945C12.1023 2.53033 12.2919 2.33042 12.4442 2.1032C12.6162 1.84646 12.7212 1.54779 12.8916 1.06265Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",className:(0,a.P)("intro"===i&&"animate-[fadeIn_.5s_.7s_both,spin_2s_1s_forwards_cubic-bezier(.43,1.54,.64,1)]",("working"===i||"thinking"===i)&&"animate-[fadeIn_.5s_.3s_both,spin_2s_1s_infinite_forwards_cubic-bezier(0.16,1,0.3,1)]","done"===i&&"animate-[fadeOut_.5s_both]","confirm"===i&&"animate-[fadeOut_.5s_both]","default"===i&&"animate-[fadeIn_0s_both]","error"===i&&"hidden"),style:{transformOrigin:"13px 3.5px"}}),(0,s.jsxs)("g",{clipPath:"url(#clip0_153_2034)",className:(0,a.P)("text-danger-subtle","error"===i?"animate-[fadeIn_.5s_.3s_both]":"hidden"),children:[(0,s.jsx)("path",{d:"M13.0312 1.42059L13.0312 3.95184",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M13.0312 6.00253V6.00263",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}),(0,s.jsx)("path",{d:"M10.8051 3.71161L12.2401 5.27411L14.823 2.14911",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)("done"===i?"animate-[fadeIn_.5s_.3s_both]":"animate-[fadeOut_.5s_both]","intro"===i&&"hidden","confirm"===i&&"hidden")}),(0,s.jsx)("path",{className:(0,a.P)("fill-primary-9","confirm"===i?"animate-[fadeIn_.5s_.3s_both,bounceSmall_1s_infinite_both]":"thinking"===i?"animate-[fadeOut_.5s_both]":"hidden"),d:"M12.9463 5.24512C13.3688 5.24422 13.713 5.58625 13.7139 6.00879C13.7146 6.43114 13.3725 6.77338 12.9502 6.77441C12.5279 6.77505 12.1845 6.43408 12.1836 6.01172C12.1828 5.58953 12.5242 5.24649 12.9463 5.24512ZM13.0391 0.0751953C14.0688 0.0730893 14.9049 0.90586 14.9072 1.93555C14.9084 2.5063 14.6484 3.04679 14.2012 3.40137L13.7773 3.7373C13.6151 3.86604 13.5201 4.06239 13.5205 4.26953V4.30371C13.5211 4.62139 13.2639 4.879 12.9463 4.87988C12.6288 4.88032 12.3701 4.62417 12.3691 4.30664V4.27246C12.3679 3.71272 12.6238 3.18263 13.0625 2.83496L13.4854 2.49902C13.6565 2.36341 13.7562 2.1568 13.7559 1.93848C13.755 1.54463 13.4358 1.22503 13.042 1.22559H12.9385C12.488 1.22679 12.1225 1.59352 12.123 2.04395L12.124 2.21875C12.1245 2.53649 11.8676 2.79522 11.5498 2.7959C11.2321 2.79653 10.9746 2.53928 10.9736 2.22168L10.9727 2.04688C10.9706 0.960578 11.8493 0.0778178 12.9355 0.0751953H13.0391Z"}),(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",strokeOpacity:"0.25",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)("intro"===i&&"animate-[fadeIn_2s_forwards]")}),(0,s.jsx)("mask",{id:"mask0_220_25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"1",width:"16",height:"14",children:(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("g",{mask:"url(#mask0_220_25)",children:(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L14.1991 4.90434L9.37937 2.12165C8.76057 1.76438 7.99907 1.76386 7.38027 2.12113C5.89314 2.97972 3.20298 4.53289 2.5596 4.90434C1.77376 5.35804 1 6.11597 1.00148 7.9207",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)(("thinking"===i||"working"===i)&&"animate-[pathLoading_2s_infinite_both]","intro"===i&&"animate-[pathEnter_2s_both]","done"===i&&"animate-[pathEnter_1s_forwards_ease]")})})]}):(0,s.jsx)(l.Icon,{icon:"sparkle",className:(0,a.P)(t,("thinking"===i||"working"===i)&&"animate-[spin_2s_infinite_forwards_cubic-bezier(0.16,1,0.3,1)]","intro"===i&&"animate-[spin_2s_forwards_cubic-bezier(0.16,1,0.3,1)]")})}},75265:(e,t,n)=>{n.d(t,{Fo:()=>s.AIChatBody,LN:()=>a.AIChatButton,Rk:()=>s.AIChatSubtitle,Xo:()=>s.AIChatDynamicIcon,YZ:()=>s.getAIChatName,k6:()=>i.AIChatControlButton,ph:()=>r.AIResponseFeedback,yQ:()=>l.y});var s=n(69332),a=n(68039),l=n(72952),r=n(13885),i=n(24066)},81493:(e,t,n)=>{n.d(t,{Lt:()=>s.SearchContextProvider,SQ:()=>s.useSearch}),n(81853),n(64715);var s=n(86628)},81853:(e,t,n)=>{n.r(t),n.d(t,{SearchInput:()=>d});var s=n(54202),a=n(59282),l=n(83372),r=n(23449),i=n(57246),o=n(86181),c=n(36945);let u=["text-sm","px-3.5","py-1.5","md:circular-corners:px-4"],d=a.forwardRef(function(e,t){let{onChange:n,onKeyDown:d,onFocus:h,value:p,withAI:f,isOpen:x,className:g,children:v,...b}=e,y=(0,a.useRef)(null),_=(0,l.ok)(),k=(0,c.K)(["ButtonStyles"]);return(0,a.useEffect)(()=>{var e,t,n;x?document.activeElement!==y.current&&(null==(e=y.current)||e.focus({preventScroll:!0}),null==(t=y.current)||t.setSelectionRange(p.length,p.length)):null==(n=y.current)||n.blur()},[x,p]),(0,s.jsx)("div",{className:(0,r.P)("relative flex size-9 grow",g),children:(0,s.jsxs)("div",{ref:t,onClick:h,className:(0,r.P)(k,o.ST.header,u,"has-[input:focus]:-translate-y-px h-9 grow cursor-pointer px-2.5 has-[input:focus]:bg-tint-base has-[input:focus]:depth-subtle:shadow-lg has-[input:focus]:depth-subtle:shadow-primary-subtle has-[input:focus-visible]:ring-2 has-[input:focus-visible]:ring-primary-hover md:cursor-text","theme-bold:border-header-link/3 has-[input:focus-visible]:theme-bold:border-header-link/5 has-[input:focus-visible]:theme-bold:bg-header-link/3 has-[input:focus-visible]:theme-bold:ring-header-link/5","theme-bold:before:absolute theme-bold:before:inset-0 theme-bold:before:bg-header-background/7 theme-bold:before:backdrop-blur-xl ","relative z-30 max-w-none shrink grow justify-start max-md:absolute max-md:right-0",x?"max-md:w-56":"max-md:w-[38px]"),children:[p&&x?(0,s.jsx)(o.$n,{variant:"blank",label:"Clear",size:"medium",iconOnly:!0,icon:"circle-xmark",className:"-ml-1.5 -mr-1 animate-scale-in px-1.5",onClick:()=>{var e;n(""),null==(e=y.current)||e.focus()}}):(0,s.jsx)(i.Icon,{icon:"magnifying-glass",className:"size-4 shrink-0 animate-scale-in"}),v,(0,s.jsx)("input",{...b,type:"text",onFocus:h,onKeyDown:d,onChange:e=>n(e.target.value),value:p,placeholder:"".concat((0,l.si)(_,f?"search_or_ask":"search"),"…"),maxLength:512,size:10,"data-testid":"search-input",className:(0,r.P)("peer z-10 min-w-0 grow bg-transparent py-0.5 text-tint-strong theme-bold:text-header-link outline-hidden transition-[width] duration-300 contain-paint placeholder:text-tint theme-bold:placeholder:text-current theme-bold:placeholder:opacity-7",x?"":"max-md:opacity-0"),role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":p&&x?"true":"false",ref:y}),x?null:(0,s.jsx)(m,{})]})})});function m(){let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t(function(){let e=navigator.platform.toLowerCase();return e.includes("mac")?"mac":(e.includes("win"),"win")}())},[]),(0,s.jsxs)("div",{"aria-busy":null===e?"true":void 0,className:(0,r.P)('shortcut -mr-1 relative z-10 hidden justify-end gap-0.5 whitespace-nowrap text-xs [font-feature-settings:"calt","case"] after:absolute after:right-full after:z-20 after:h-full after:w-8 after:bg-linear-to-r after:from-transparent after:to-tint-base theme-bold:after:to-transparent after:content-[\'\'] contrast-more:text-tint-strong md:flex',e?"motion-safe:animate-fade-in motion-reduce:opacity-11":"opacity-0"),children:[(0,s.jsx)("kbd",{className:"flex h-5 min-w-5 items-center justify-center rounded-sm border border-tint-subtle theme-bold:border-header-link/5 bg-tint-base theme-bold:bg-header-background px-1 ".concat("mac"===e?"text-sm":""),children:"mac"===e?"⌘":"Ctrl"}),(0,s.jsx)("kbd",{className:"flex size-5 items-center justify-center rounded-sm border border-tint-subtle theme-bold:border-header-link/5 bg-tint-base theme-bold:bg-header-background px-1",children:"K"})]})}},86628:(e,t,n)=>{n.r(t),n.d(t,{SearchContext:()=>i,SearchContextProvider:()=>o,useSearch:()=>c,useSearchLink:()=>u});var s=n(54202),a=n(767),l=n(59282);let r={q:a.tU,ask:a.tU,scope:(0,a.M1)(["all","default","extended","current"]).withDefault("default"),global:a.cr},i=l.createContext(null);function o(e){let{children:t}=e,[n,o]=(0,a.ab)(r,{history:"replace"});l.useEffect(()=>{(null==n?void 0:n.ask)==="true"&&(null==n?void 0:n.q)&&o({q:null,ask:n.q}),(null==n?void 0:n.global)===!0&&o({scope:"all",global:null})},[n,o]);let[c,u]=l.useState(()=>(null==n?void 0:n.q)!==null),d=l.useMemo(()=>null===n||null===n.q&&null===n.ask?null:{query:n.q,ask:n.ask,scope:n.scope,open:c},[n,c]),m=l.useRef(d);l.useLayoutEffect(()=>{m.current=d},[d]);let h=l.useCallback(e=>("function"==typeof e&&(e=e(m.current)),null===e)?(u(!1),o({q:null,ask:null,scope:"default"})):(u(e.open),o({q:e.query,ask:e.ask,scope:e.scope})),[o]);return(0,s.jsx)(i.Provider,{value:{state:d,setState:h},children:t})}function c(){let e=l.useContext(i);if(!e)throw Error("useSearch must be used within SearchContextProvider");return[e.state,e.setState]}function u(){let[,e]=c();return l.useCallback((t,n)=>{let s=new URLSearchParams;return t.query?s.set("q",t.query):s.delete("q"),t.ask?s.set("ask",t.ask):s.delete("ask"),t.scope?s.set("scope",t.scope):s.delete("scope"),{href:"?".concat(s.toString()),prefetch:!1,onClick:s=>{s.preventDefault(),null==n||n(),e(e=>({...e,query:void 0!==t.query?t.query:null,ask:void 0!==t.ask?t.ask:null,scope:void 0!==t.scope?t.scope:"default",open:void 0!==t.open&&t.open}))}}},[e])}},90802:(e,t,n)=>{n.d(t,{K:()=>i,SpaceLayoutContextProvider:()=>r});var s=n(54202),a=n(59282);let l=a.createContext({basePath:""});function r(e){let{basePath:t,children:n}=e,r=a.useMemo(()=>({basePath:t}),[t]);return(0,s.jsx)(l.Provider,{value:r,children:n})}function i(){let e=a.useContext(l);if(!e)throw Error("SpaceLayoutContext not found");return e.basePath}},91625:(e,t,n)=>{n.r(t),n.d(t,{LoadIntegrations:()=>u,integrationAssistants:()=>o,integrationsAssistantTools:()=>i,useIntegrationAssistants:()=>c});var s=n(59282),a=n(95196),l=n(80532);let r=new Map,i=a.y(()=>({tools:[]})),o=a.y(()=>[]);function c(){return l.P(o)}function u(){return s.useEffect(()=>{!function(e){for(var t,n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];null==(t=r.get(e))||t.forEach(e=>e(...s))}("load")},[]),null}window.GitBook={addEventListener:(e,t)=>{var n;let s=null!=(n=r.get(e))?n:[];s.push(t),r.set(e,s)},removeEventListener:(e,t)=>{var n;let s=null!=(n=r.get(e))?n:[],a=s.indexOf(t);-1!==a&&s.splice(a,1)},registerTool:e=>{i.setState(t=>({tools:[...t.tools,e]}))},registerAssistant:e=>{let t=window.crypto.randomUUID();return o.setState(n=>{var s;return[...n,{...e,id:t,ui:null==(s=e.ui)||s,mode:"overlay",pageAction:!1}]},!0),()=>{o.setState(e=>e.filter(e=>e.id!==t),!0)}}}},96160:(e,t,n)=>{n.r(t),n.d(t,{AIContextProvider:()=>p,useAI:()=>f});var s=n(54202),a=n(64928),l=n(57246),r=n(94543),i=n(59282),o=n(83372),c=n(63243),u=n(75265),d=n(99682),m=n(86628);let h=i.createContext(null);function p(e){let{aiMode:t,trademark:n,children:a}=e,l=i.useMemo(()=>({aiMode:t,trademark:n}),[t,n]);return(0,s.jsx)(h.Provider,{value:l,children:a})}function f(){let e=function(){let e=i.useContext(h);if(!e)throw Error("useAI must be used within AIContextProvider");return e}(),t=(0,c.J4)(),n=(0,c.C8)(),p=(0,o.ok)(),[,f]=(0,m.useSearch)(),x=[];e.aiMode===a.RN.Assistant?x.push({id:"gitbook-assistant",label:(0,u.YZ)(p,e.trademark),icon:(0,s.jsx)(u.yQ,{state:t.loading?"thinking":"default",trademark:e.trademark}),open:e=>{n.open(),e&&n.postMessage({message:e})},pageAction:!0,ui:!0,mode:"sidebar"}):e.aiMode===a.RN.Search&&x.push({id:"gitbook-ai-search",label:(0,o.si)(p,"ai_chat_context_badge"),icon:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Icon,{icon:"search",className:"size-4"}),(0,s.jsx)(l.Icon,{icon:"sparkle",iconStyle:r.p.Solid,className:"absolute top-[2.5px] left-[2.6px] size-2"})]}),open:e=>{e&&f(t=>t?{...t,query:null,ask:e,open:!0}:null)},pageAction:!1,ui:!1,mode:"search"});let g=(0,d.r0)();return g.length>0&&x.push(...g.map(e=>({...e,icon:(0,s.jsx)(l.Icon,{icon:e.icon,className:"size-4"}),open:t=>{f(e=>{var t,n;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}}),e.open(t)}}))),{config:e,assistants:x}}},99682:(e,t,n)=>{n.d(t,{By:()=>s.integrationsAssistantTools,r0:()=>s.useIntegrationAssistants});var s=n(91625)}}]);